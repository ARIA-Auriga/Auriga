----------------------------------------
//0221 [2007/07/13] by Rayce

・path.cから経路探索ルーチン単体テスト関数を抹消（path.c）
・intif.cの細かい整形
	-> intif_GMmessage() を少し変更
	-> intif_parse_GuildMemberInfoChanged() から不要な代入を削除
・guild.cの細かい整形
	-> db/castle_db.txtで指定できるMap_Name, Castle_Name, Event_Nameを23文字までに制限
	-> guild_broken() でメモリをアロケートしなくて済むように改善

----------------------------------------
//0220 [2007/07/12] by Rayce

・バッファオーバーラン対策として文字列の末尾に \0 を強制するように修正（core.c, httpd.c, socket.c）
・windows環境で吐き出されるcrashdump.logの改行コードをCR/LFに修正（core.c）
・httpd.cの細かい整形
	-> httpd_strcasencmp() の代わりにstrcasecmpを使う
	-> httpd_pages() 用の関数ポインタを HttpdFunc型 としてtypedefする
	-> rand() を atn_rand() に変更

----------------------------------------
//0219 [2007/07/12] by Rayce

・ROメールにアイテムやZenyを添付するとき、idxが不正な値の場合は弾くようにチェック強化（mail.c）
・mail_checkappend() をstaticに変更（mail.*）
・clif_parse_GuildRequestInfo() で先にtypeの不正チェックを行うように修正（clif.c）

・SC_INCMSP2によるMAXSP増加の計算タイミングを少し変更（status.c）
・status.cの動作に影響しないレベルの細かい整形

----------------------------------------
//0218 [2007/07/11] by Rayce

・0202におけるgetpetinfo関数およびgethomuninfo関数の変更点を巻き戻し
　これまでの修正によりペットとホムの名前には \0 が入ることが保証されたのでaStrdupを使う（script.c）
・setmapflag命令でnosaveを指定する際、MAP名を15文字までに制限（script.c）

・map_session_data構造体のメンバwarp_waitingをビットフィールドに変更（map.h, skill.c, unit.c）
・ranking.c, unit.cの細かい整形

----------------------------------------
//0217 [2007/07/11] by Rayce

・ペットの名前を23文字までに制限（pet.c）
・動作に影響しないレベルの細かい整形（chat.c, mob.c, party.c, pet.*）

----------------------------------------
//0216 [2007/07/11] by Rayce

・battle_auriga.confのpet_loot_typeが0のとき、ペットが過剰にアイテムをルートする際に
　重量が変化しなかったバグを修正（pet.c）
・倉庫を開いているときだけ以下のタイミングで storage_storage_save() を呼び出すように修正（clif.c, homun.c, pet.c）
	ホムの削除時
	ペットの卵の孵化時
	ペットを卵に戻す時
	battle_auriga.confのpet_leaveがyesのときでペットが親密度0で消える時
	battle_auriga.confのsave_player_when_drop_itemがyesのときでアイテムを床に落とした時

・mapif_create_pet() でペットの新規作成に失敗した場合にはfreeするように修正（int_pet.c）
・GCCにおいて map_getcellp() で警告が出ていたので修正（map.c）

----------------------------------------
//0215 [2007/07/10] by Rayce

・アクセス違反が発生する可能性を修正
	-> pet_select_egg() で不正なindexが送信されてくるのを防ぐ（pet.c）
	-> guild_created() でエンペリウムが見つからないときのチェックを考慮する（guild.c）
	-> db/skill_db.txtのinf2に8192のフラグがセットされているスキルについて、
	   スキルLvが11以上の場合にはスキルLv10と同じ消費アイテムチェック処理にする（skill.c）

・homun_callhom() でエンブリオを検索する際に pc_search_inventory() を使うように修正（homun.c）
・removecards_sub() の > を >= に修正（script.c）
・skill_weapon_refine() で pc_search_inventory() を二重に呼ばないように改善（skill.c）
・battle_skill_attack() のカイトの部分で「水晶のかけら」を検索する際、不必要な個数チェックを省略（battle.c）
・ポーションピッチャーおよびスリムポーションピッチャーをスキルLv11以上で使う場合、
　スキルLv10と同じアイテムを使用するように変更（skill.c）

・csv_data構造体へのキャストを明示してなかった箇所を修正（script.c）
・script.cの細かい整形

----------------------------------------
//0214 [2007/07/10] by Rayce

・ユーザー定義関数として使える関数名を49文字までに制限（npc.c）
・npc_parse_script(), npc_parse_function() を少しだけ改善（npc.c）
・skill.cで使う WARP_CLASS はnpc.hから取得するように変更（skill.c）
・npc.cの細かい整形

----------------------------------------
//0213 [2007/07/09] by Rayce

・mob.cの細かい整形（mob.*）
	-> イベントを持っているMobを倒したときバッファアンダーフローが起こる可能性を修正
	-> mob_ai_sub_hard() で攻撃されたかの確認を行う際、チェックが二重に行われる無駄を修正
	-> db/mob_db.txtで指定可能なモンスター名の文字数を23文字までに制限する
	-> db/mob_skill_db.txtにMOB_ID_MAXを越える値をIDとして指定した場合にサーバクラッシュするバグを修正
	-> db/mob_skill_db.txtにMAX_MOBSKILLを越える数のスキルを登録しても「readdb: too many skill」の警告が
	   出力されなかったバグを修正

----------------------------------------
//0212 [2007/07/08] by Rayce

・mail.cの細かい整形（mail.c）
	-> nullpoチェックを入れる
	-> ROメールの受信者およびタイトルの末尾に \0 を付加する

・map.cの細かい整形（map.c）
	-> block_free_max を BLOCK_FREE_MAX に改名
	-> BL_LIST_MAX はblock_list構造体用のtypeと混同するので BLOCK_LIST_MAX に改名
	-> map_calc_dir() の最適化
	-> MAP名の末尾に \0 を付加する

・sleep_data構造体を無名構造体に変更（script.h）
・以下の入れ子になった構造体を外に分離する（db.h, map.c, map.h, script.h）
	db_free
	map_cache_head
	pet_skill_attack
	pet_skill_support
	script_stack

----------------------------------------
//0211 [2007/07/08] by Rayce

・ランダム系アイテムデータベースを読み込む際、存在しないアイテムのIDが指定されていた場合は
　読み込み対象外にするように修正（itemdb.c）
・db/item_db.txtで指定可能なアイテムの日本語名および英語名を47文字までに拡張（itemdb.c）
	現時点で idnum2itemdisplaynametable.txt に記載されている最長のアイテム名が37文字でした。
	これらをカバーするため文字数制限を32文字から47文字に引き上げます。
	バッファオーバーラン対策により末尾には \0 を強要するため、48文字ではなく47文字です。
・@idsearchの処理を最適化（atcommand.c, itemdb.*）
	itemdb_idsearch() を追加。
	numdb_foreach() を使うので効率良く検索が行われます。
	itemdb.cにあった変数 max_itemid および itemdb_getmaxid() は不要になったので削除。
・@idsearchでスロット数を表示するように機能拡張（atcommand.c, msg_auriga.conf）
・itemdb.cの細かい整形

----------------------------------------
//0210 [2007/07/07] by Rayce

・lock.cでバッファオーバーランが発生する可能性を修正（lock.c）
・0208においてatcommand.cで警告が出ていたので修正
	-> 抜け落ちていたreturnを補完（atcommand.c）
	-> pc_setpos() の引数にconstを付ける（pc.*）

----------------------------------------
//0209 [2007/07/07] by Rayce

・ホムが消えるとき、泣きエモタイマーが即座に削除されないバグを修正（unit.c）
・HPが0のホムを召喚してしまった場合は unit_free() で削除するように修正（homun.c）
・homun_get_create_homunid() を簡素化（homun.c）
・ホムの名前を23文字に制限する（homun.c）
	バッファオーバーラン対策のため、db/homun_db.txtおよびリネーム時で使える文字数が
	24 → 23に変更されます
・動作に影響しないレベルの細かい整形（homun.*）

----------------------------------------
//0208 [2007/07/06] by Rayce

・battle_addmastery() でデーモンベインのダメージ加算計算に浮動小数演算を使わないように変更（battle.c）
・atcommand.cの全体的な整形
	不要なmemsetを撤廃
	@iconの第二引数省略時はONになるように拡張

----------------------------------------
//0207 [2007/07/06] by Rayce

・ペットの卵を倉庫に入れたとき装備品目に置かれなかった問題を修正（clif.c）
・unit_walktodir() を pc_runtodir() と同様に修正（unit.c）
・取引時の距離チェックは unit_distance2() を利用するように変更（trade.c）

・skill.cの全体的な細かい整形
・skill_check_condition2_pc() の「ソウルリンカーで使えないスキル」の部分をまとめ直し（skill.c）
	battle_config.soul_linker_battle_modeの使い方がおかしかったので修正
	battle_config.soul_linker_battle_mode_kaが何故か使われてなかったので修正

----------------------------------------
//0206 [2007/07/06] by Rayce

・サーバースナップショット（version.h）
・不要なファイルをフォルダごと削除
	./bin
	./script/mob
