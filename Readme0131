----------------------------------------
//0158 [2007/04/18] by Rayce

・friend.cを少し修正

・SQL: 見栄えが良くないので、拳聖の感情のセーブデータを memo テーブルから切り離して
       feel_info テーブルに保存するように変更（char.c, char-converter.c）

	memo テーブルで使っていた type フィールドは廃止
	付属のAuriga158-changetable.sqlを実行すると自動的にデータが feel_info テーブル
	にコンバートされます

----------------------------------------
//0157 [2007/04/18] by Rayce

・script.cのbuildinで使われている変数の一部をshort型からint型に変更（script.c, unit.*）
・スクリプトで使える基数として2進数をサポート（script.c）
	0bを頭に付けて記述します。
	ビットフラグを明瞭に表現したいときなどに。

	0b1101 [2進数] = 13 [10進数] = 0xd [16進数] = 015 [8進数]

----------------------------------------
//0156 [2007/04/17] by Rayce

・AthenaProject2292の一部をmerge、thanks to Blazeさん
	-> デスペラードのダメージ発生インターバルを150ms → 100msに変更（skill.c）
	-> 実行範囲を持つNPCの範囲内でhideon→offをした時、スクリプトが再走しなかったのを修正（npc.c）

・クローズコンファインをボス属性無効に修正（skill.c）
・ストーンカースのLv6が以上のとき成功時にジェムが消費されないバグを修正（skill.c）
・skill_check_condition2() を少しだけ書き換え（skill.c）
・usediteminfo関数で製造者のIDを取得するとき、名前入りアイテムでない場合は0が返るように修正（pc.c）

----------------------------------------
//0155 [2007/04/17] by Rayce

・anti hacker、merged from eA（clif.c, map.h）
	-> MAPロード時に認証完了しているかどうかチェックする
	-> エモーション使用時に1秒以上インターバルがあるかどうかチェックする
	   clif_parse_Emotion() のパケットを短時間に連続で送信されると周囲のプレイヤーを
	   サーバキャンセルで落とすことができる穴を防ぎます

----------------------------------------
//0154 [2007/04/17] by Rayce

・アイコンパケットを送信するだけの状態異常を廃止
	以下の5つの状態異常はsc_dataとして実装する必要がありません。
	状況に応じてアイコンパケット0x196を送り付けるだけで良いからです。

	SC_RIDING   : pc_isriding() で状態の取得が可能
	SC_FALCON   : pc_isfalcon() で状態の取得が可能
	SC_WEIGHT50 : pc_50overweight() で状態の取得が可能
	SC_WEIGHT90 : pc_90overweight() で状態の取得が可能
	SC_DEVIL    : SG_DEVILを覚えているかどうかで判断可能

	-> 重量オーバーのアイコンを送信したかどうかの判定のためmap_session_data構造体にicon_weightメンバ追加
	-> pc_checkweighticon() 変更
	-> pc_setoption() 変更

・1プレイヤーにのみアイコンパケットを送りつける clif_status_load() 追加（clif.*）
	merged from eA, thx a lot!!
・カートを外すときにクライアント側で保存されているアイテムデータを消去するように修正（clif.*, pc.c）
	clif_cart_clear() 追加
・チェンジカートを使用したときサーバ側でベースレベルのチェックをするように強化（pc.c）
・clif_status_change() に SI_*** ではなく SC_*** を渡していた箇所を修正（skill.c, status.c）
・タイガーアイのパケット送信に clif_status_load() を使うように改善（pc.c, status.c）

----------------------------------------
//0153 [2007/04/16] by Rayce

・BCCのときも__int64型をatn_bignumber型として使うように変更（utils.h）
	32bitに強制変換されるバグが発生するのは恐らくunsignedのときだけだと思います
	atn_bignumber型はsignedなので問題はないはず
	不具合が起こる人は BIGNUMBER_DOUBLE をdefineしてコンパイルしてください

・eAを参考に clif_parse_LoadEndAck() の書き換え（clif.c）
	一部の処理の順番を変更しました
	またテレポやMAP移動などによる画面の切り替え時にクライアントに送られるパケットの量が削減されます

----------------------------------------
//0152 [2007/04/15] by Rayce

・温もり系の吹き飛び方向およびセル数がおかしくなっていた問題を修正（battle.c）
・skill_blown() の処理順を少し修正（skill.c）
・0136のゴスペルの修正が不完全だったので再度修正（status.c）
・skill.c, status.cの細かい整形

----------------------------------------
//0151 [2007/04/15] by Rayce

・battle_auriga.confの party_join_limit がnoのときに、パーティの機能が誤作動するバグを修正（party.c）
	refered from AthenaProject2291, thanks

----------------------------------------
//0150 [2007/04/15] by Rayce

・AthenaProject2291の一部をmerge、thanks to 暇人さん
　以下Readmeより転載
　　・料理(課金用)、戦闘教範50、生命保険証の効果を実装 (pc.c、status.c、status.h)
　　・上記の効果実装の為、関連dbを更新 (const.txt、item_db.txt、scdata_db.txt)

・Expペナルティ処理を修正してまとめた pc_exp_penalty() を追加（pc.c）
・レディムプティオ使用時、mapflagにnopenaltyが設定されていてもExpペナルティを受けるように修正（pc.c）

・064以降、「レディムプティオ」と「パパ、ママ、大好き」によるデスペナルティ回避効果が
　発動しなくなっていたのを修正（db/scdata_db.txt）
・battle_auriga.confの death_penalty_type を2に変更しておく
・db/const.txtからギルドスキル系の定数を削除
・db/const.txtのオートスペル系の定義を16進数に変更

----------------------------------------
//0149 [2007/04/14] by Rayce

・AthenaProject2290の一部をmerge、thanks to Blazeさん
　以下Readmeより転載
　　・NPCスキル「不死属性付与」効果時の挙動を修正（status.c、status.h)
　　・拳聖スキル「太陽と月と星の奇跡」を暫定実装（battle.c、battle.h)
　　・太陽と月と星の奇跡の発動確率を変更できるように修正（battle_athena.conf）

・SI_NIGHT が SI_MIRACLE に変更されたので@night, @dayのエフェクト表示部分をコメントアウト（atcommand.c）

----------------------------------------
//0148 [2007/04/14] by Rayce

・AthenaProject2289-fixよりmerge、thanks to 暇人さん
　以下Readmeより転載
　　・料理使用時のアイコン(STR〜LUK、HIT、FLEE、CRITICAL)を表示するように修正 (status.c、status.h)
　　　AthenaProject BTS報告chaさん thank's
　　・料理使用時ログアウトしても効果が残るように修正 (scdata_db.txt)

----------------------------------------
//0147 [2007/04/14] by Rayce

・AthenaProject2288よりmerge、thanks to Blazeさん
　以下Readmeより転載
　　・NPCスキルの召喚系の仕様変更。種類 x Lv 匹 -> Lv 匹、召喚範囲の修正（mob.c)
　　・ソウルリンカースキル「エスク、エスウ、エスカ」の状態時、姿を維持しなかったのを修正（status.c)
　　・拳聖スキル「太陽と月と星の融合」状態のときは、移動速度が上がるように修正（status.c)
　　・拳聖スキル「太陽・月・星の温もり」のノックバック方向をMobの向きに依存するように修正（skill.c)
　　・MobスキルDBの召喚を変更に伴い修正（mob_skill_db.txt）

・skill_blown() で吹き飛ばしセル数が0のときは何も処理しないように修正（skill.c）
・mob_summonslave() の引数を一つ増やす（mob.*）

----------------------------------------
//0146 [2007/04/13] by Rayce

・高速化のため skill_get_skilldb_id() をマクロに変更（skill.h）
・db/skill_db.txtの読み込みの際、skill_get_skilldb_id() を使って
　スキルIDの範囲チェックを行うように最適化（skill.c）
・unit_skilluse_id() および unit_skilluse_pos() を最適化（unit.c）
・補正済み射程を返す skill_get_fixed_range() を追加（clif.c, mob.c, skill.*, unit.c）

・ギルドスキル使用時のNULLチェック追加（skill.c）
・skill_check_condition2() からギルドスキルに関するチェックを削除（skill.c）
	チェックが二重になるので skill_check_condition2_pc() だけで良い

----------------------------------------
//0145 [2007/04/13] by Rayce

・clif.cの全面的な修正や整形
	-> バッファオーバーフローする可能性を修正
		clif_GlobalMessage()
		clif_party_message()
	-> 引数の仕様を変更
		clif_clearflooritem()
		clif_dispchat()
		clif_clearchat()
		clif_showvendingboard()
		clif_closevendingboard()
	-> ホムの情報を参照すべきところがPCの情報を参照しているバグを修正
		clif_homskillinfoblock()
		clif_homskillup()
	-> clif_set009e() を clif_dropflooritem() に吸収
	-> clif_set01e1() の処理を変更
	-> パケット送信用のバッファをunsigned char型に修正
	-> nullpoチェックが抜けてる箇所を修正

----------------------------------------
//0144 [2007/04/13] by Rayce

・0143の温もりに関する修正（battle.c, pc.c, skill.c, status.c, unit.c）
	-> status_change_end() 内でスキルユニットを削除する
	-> skill_unit_group のアドレスの保存先をsc_dataのval3からval4に変更
	-> battle_calc_weapon_attack() の一部を修正

----------------------------------------
//0143 [2007/04/12] by Rayce

・AthenaProject2286-fixよりmerge、thanks to Blazeさん
　以下Readmeより転載
　　・拳聖スキル「太陽・月・星の温もり」実装（skill.c、battle.c、status.c、unit.c、pc.c)
　　・マップを移動した時、拳聖スキル「太陽・月・星の安楽」の効果を削除するように修正（pc.c)
　　・スキルユニットを設置後、ハエやマップ移動で消えてしまうのを修正（pc.c、unit.c)
　　・上記変更に伴うunit_remove_map関数の仕様変更
　　	（unit.c、unit.h、pc.c、mob.c、npc.c、pet.c、script.c、atcommand.c)
　　・テコン系列の各種スキルの使用SPや詠唱時間などが間違っていたのを修正
　　	（skill_require_db.txt、skill_cast_db.txt）
　　・テコン系列の蹴りスキルを3段HITするように修正（skill_db.txt）
　　・ガンスリンガースキル「グラウンドドリフト」の発動時エフェクトを修正（skill.c、skill_unit_db.txt）
　　・モンスターの最低沸き間隔時間を5秒から1秒（本鯖仕様）に修正（mob.c、unit.c）

----------------------------------------
//0142 [2007/04/11] by Rayce

・guild_member構造体から使われないメンバ rsv1, rsv2 を削除
・guild_explusion構造体から使われてないメンバ acc, rsv1, rsv2, rsv3 を削除
	セーブデータの形式が変更されているのでご注意を

・mapif_parse_GuildLeave() を少し修正（int_guild.c）
・一部のmemcpyをstrncpyに修正（chat.c, clif.c, npc.c）

・TXT: JOURNAL_IDENTIFIERをバージョン03に変更しておく（journal.c）
・SQL: main.sql修正、Auriga-0142_changetable.sql添付

----------------------------------------
//0141 [2007/04/10] by Rayce

・家族PTによるLv差を無視した経験値公平機能実装（int_party.c, intif.*, party.c）
　以下の条件が揃ったときに設定可能
	-> 親子の3人だけのPT
	-> 養子キャラがオンライン
	-> 両親のうちどちらかがオンラインで養子キャラと同一MAPに居る
	   （もう一人の親については特に制限しない）
	-> 両親のLvが70以上
　以下は仕様
	-> 誰かがMAP移動やログアウトした時点で公平は解除
	-> 誰かが加入・脱退した時点で公平は解除

・party構造体のメンバ exp, item をunsigned char型に変更（mmo.h, inter.c, party.*）
・doc/inter_server_packet.txt修正

----------------------------------------
//0140 [2007/04/10] by Rayce

・TXT: アカウントデータ（auth_dat）およびキャラデータ（char_dat）の検索を高速化（login.c, char.c）
	バイナリサーチのアルゴリズムを使って検索します
	もしセーブデータのIDが順番に並んでない場合は、ロード時に挿入ソートして補正します

	login_id2idx() 追加
	char_id2idx() 追加

----------------------------------------
//0139 [2007/04/09] by Rayce

・プレイヤーの base_level, job_level を保存する変数をunsigned short型に変更（mmo.h, mob.*, pc.c）
	map.hのMAX_LEVELを増やせば255以上にも対応可能になります

・isspace() に渡す引数をunsigned char型にキャストするように修正（atcommand.c）
・clif_packet_debug() の関数本体を削除し忘れ（clif.c）
・細かい修正や整形（int_homun.*, int_party.c, int_pet.c, homun.c）

・SQL: levelに関連するフィールドの型を変更（main.sql, Auriga139_changetable.sql）

----------------------------------------
//0138 [2007/04/04] by Rayce

・AthenaProject2284よりmergeおよび一部改変、thanks to Blazeさん
　以下Readmeより転載
　　・Mobスキル「エモーション」によるモードチェンジ実装（skill.c)
	　　mob_skill_db.txt、エモーションの値2にmodeを入れるとその値へモードチェンジします。
	　　例）アルギオペ追跡時にノンアクティブ化（移動1+攻撃128=129）
	　　1099,エモーション＠アルギオペ,chase,197,1,100,0,5000,no,self,always,0,19,129,,,,
　　・Mobの複数の同じスキルは使用後ディレイを共有するように修正（mob.c)

・不要なローカルプロトタイプ宣言を削除（mob.c）
・mobskill_use_id() および mobskill_use_pos() を移動（mob.c）
・使われてないプロトタイプ宣言を削除（mob.h）
	mobskill_use_id2()
	mobskill_use_pos2()
	mobskill_use_id_sub_command_to_slave()

----------------------------------------
//0137 [2007/04/04] by Rayce

・AthenaProject2281よりmerge, thanks to 暇人さん
　以下Readmeより転載
　　・スキル「マグヌスエクソシズム」のFlag値をエラーが出ない様に修正 (db/skill_uniti_db.txt)
　　・飛行船NPCの一部修正 (npc_town_airport.txt)

・AthenaProject2282よりmerge, thanks to Paraさん
　以下Readmeより転載
　　・追加された2種類のペット「クリスマスゴブリン」「餅」を実装（db/pet_db.txt）

----------------------------------------
//0136 [2007/04/03] by Rayce

・AthenaProject2280よりmerge, thanks to Blazeさん
　以下Readmeより転載
　　・スキル「火炎陣」のHIT数を修正 (db/skill_db.txt)
　　・アサシン転職クエストのJob50時の処理を修正 (npc_job_12assassin.txt)
　　・混乱発動時の挙動を修正 (src/map/status.c)
　　・ゴスペル効果「全状態異常耐性」を耐性計算している状態異常のみに対して発動するように (status.c)
　　・ジークフリードの状態異常耐性実装 (status.c)

----------------------------------------
//0135 [2007/04/03] by Rayce

・AthenaProject2279よりmerge, thanks to Blazeさん
　以下Readmeより転載
　　・スキル「火炎陣」の仕様を修正 (skill.c)
　　・スキル「一閃」の仕様を修正 (skill.c)
　　・ファイアーボールが多段HITしていたのを修正 (skill.c)
　　・スキル「投擲修練」の効果が風魔手裏剣などに適用されていたのを修正 (battle.c)
　　・スキル「影分身」が影宝珠を消費せずに使用できたのを修正 (db/skill_require_db.txt)
　　・忍者スキル・ガンスリンガースキルの攻撃力・詠唱時間などを修正
　　　(src/map/battle.c、db/skill_db.txt、db/skill_cast_db.txt)
　　・ガンスリンガーのスキルで装備制限の相違を修正 (db/skill_db.txt)
　　・忍者スキル・ガンスリンガースキルで装備制限の相違を修正 (db/skill_db.txt)

----------------------------------------
//0134 [2007/04/03] by Rayce

・太陽と月と星の融合を使ったときに拳聖の魂が解除されるように修正（skill.c）
・死亡している敵プレイヤーがサイトブラスターの効果範囲内に居るとサイトブラスターが
　解除されてしまうバグを修正（status.c）
・不要な関数 clif_parse_debug() を削除（clif.c）

・db/packet_db.txtの一部を修正
・パケット解析結果を doc/client_packet.txt に反映

----------------------------------------
//0133 [2007/03/27] by Rayce

・clif_homskillup() は0x10eではなく0x239のパケットを使うように修正（clif.c）
・ホムの腹減り値に使うパケット0x230のtypeを0x200に修正（homun.c）

・party_share_loot() を party_loot_share() に改名（party.*, pc.c）
・party_member構造体のメンバのサイズ変更（mmo.h, int_party.c, party.*）
	leader : unsigned char
	online : unsigned char
	lv     : unsigned short

----------------------------------------
//0132 [2007/03/25] by Rayce

・battle_auriga.confを少し整形
・typo修正 penaly → penalty（battle.*, status.c）
・スクリプトのsc_end命令でダンス状態とバジリカが正常に解除されるように修正（script.c）

・ゴスペルに関する修正（skill.c, status.c, unit.c）
	-> ゴスペル中にハエの羽などでテレポートすると動けなくなる問題を修正してみる（unit.c）
	-> status_change_end() 内でスキルユニットを削除する
	-> skill_unit_group のアドレスの保存先をsc_dataのval3からval4に変更
	   グラフィティに合わせるため

----------------------------------------
//0131 [2007/03/24] by Rayce

・サーバースナップショット（version.h）
・不要なファイルを削除
	bcc32_consqlmake.bat
・全てにおいて「Athena」の冠を撤去、「Auriga」に変更
