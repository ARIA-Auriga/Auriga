----------------------------------------
//0588 [2009/02/15] by Rayce

・SQL: 0587で追加したUNIQUEキーにおいて、varcharの判定がcase insensitiveであるため
       キーの重複が発生していた問題を修正
       char, guild, login, party テーブルの該当フィールドに BINARY オプションを付与する
       （main.sql, sql-files/Auriga587-changetable.sql）
		reported by easeさん

・SQL: 上記変更に伴い大文字/小文字判定が不要になったので、処理を簡略化する
       （char.c, int_guild.c, int_party.c, login.c）

・SQL: 0587でサポートしなかったワープポータルのメモ情報の移行をやっぱり
       サポートできるように追加（sql-files/Auriga587-changetable.sql）

  ※今回はAuriga587-changetable.sqlを直接修正しています。
    既にクエリを流してしまっている人は、申し訳ありませんが手動での対応を
    お願いします。

  ※ワープポータルのメモ情報を移行できるのはMySQLのバージョンが4.1以上の
    場合のみです。
    4.0以下の方は該当箇所をコメントアウトしてください。
    また、メモの順番は保持されない可能性があります。
    順番まで厳密に移行する必要がある場合は、手動での対応をお願いします。

----------------------------------------
//0587 [2009/02/04] by Rayce

・ワープポータルのメモの順番が不定になる可能性を修正（char.c）
・不要なコメントを削除

・TXT: JOURNAL_IDENTIFIER を 09 に引き上げ（journal.c）
・SQL: memo テーブルに index フィールドを追加（sql-files/Auriga587-changetable.sql）

・SQL: テーブル定義の見直し（sql-files/main.sql）
	-> char テーブルを char_data に改名
	-> friend テーブルのカラム名を変更
	-> memo, feel_info テーブルから実質使われていない auto_increment を削除
	-> 重複する不要なINDEXの削除
	   複合インデックスの左端の部分はキーとして利用できる
	-> データの堅牢性向上のため、UNIQUEキーを張るように改善
	-> EXPLAIN の実行結果より、インデックスが利用できていないクエリに対して
	   INDEXを張るように改善
	-> global_reg_value テーブルの type はカーディナリティが低いので
	   worldreg, accountreg, globalreg テーブルにそれぞれ正規化する
	-> ipbanlist テーブルは参照されていないので削除

・SQL: 不要な ORDER BY を削除（int_guild.c）
・SQL: sql-files/drop_table.sql に IF EXISTS を付ける

  ※SQLモードについて、テーブル定義を変更しています。
    外部のアプリ等でDBを参照している方は、テーブル名・カラム名の変更に合わせて
    修正してください。
    また、INDEXはAuriga内部で使われる最低限のものだけにしています。
    DBを頻繁に参照する方は、各自適宜INDEXを張ってください。

  ※SQLモードについて、ワープポータルのメモの情報は移行されません。
    PRIMARY KEYを作り直す必要がある関係上、移行のスクリプトが極めて複雑になるため
    サポートしないことにしました。
    もしデータを移行したい方は、Auriga587-changetable.sql を実行する前に
    バックアップを取った上、手動でデータを入力し直して下さい。

  ※converter未対応です。

----------------------------------------
//0586 [2009/01/12] by Rayce

・太陽と月と星の怒りによるダメージボーナスは、基本武器ダメージ計算ではなく
  eAベースで修練ダメージ計算後に加算するようにしてみる（battle.c）
	reported by easeさん、Toshiさん

・スーパーノービスの魂状態のとき、装備可能な武器の判定を汎用的な方法に修正（pc.c）
	reported by shobonさん

----------------------------------------
//0585 [2009/01/12] by Rayce

・サーバ起動時、接続サーバのIPアドレスは1回だけ表示されるように変更
　（login.c, char.c, chrif.*, clif.*, map.c）
	-> IPアドレスに変換後の文字列ではなく、confに記述されたホスト名を
	   そのまま保持するように変更
	-> chrif_sethost(), clif_sethost() を追加

・gethostbyname() をラップした host2ip() を追加（socket.*）
・不要になった #include を削除

----------------------------------------
//0584 [2009/01/12] by Rayce

・0583以降、mapif_parse_GuildBasicInfoChange() で警告が発生していたので修正（int_guild.c）

・[SQL] 0583でコンパイルエラーが発生するのを修正（int_guild.c）
	reported by seionさん

----------------------------------------
//0583 [2009/01/10] by Rayce

・0541以降、取得不可能なギルドスキルも一覧に表示されていた問題を修正（int_guild.c）
	-> guild_calc_skilltree() を追加
	   guild_check_skill_require() を削除
	-> PCのスキルツリーと同様に、ギルドスキルについてもスキルツリーの計算を行います

・ギルドスキルのポイント割り振りに失敗したとき、以後ポイント割り振りが
  出来なくなる問題を修正（int_guild.c, clif.c, guild.*, intif.c）
	-> 失敗時にも0x10eのパケットを送りつける
	-> 0x383cのパケット長を14から15に拡張

・ギルドスキルポイントを上げるためのコマンド @guildskpoint を追加（atommand.*, int_guild.c）
	-> @guildlvup と同じくギルドマスターのみ使用可能
	-> mapif_parse_GuildBasicInfoChange() に GBI_SKILLPOINT に対する処理を追加

・clif_guild_skillinfo() のパケット定義を蔵の仕様に合わせる（clif.c）
・mapif_parse_GuildMemberInfoChange() の細かい修正（int_guild.c）
・mapif_parse_GuildAddMember() で mapif_guild_info() が2回呼び出される
　可能性を修正（int_guild.c）

----------------------------------------
//0582 [2009/01/09] by Cocoa

・ローグギルドでモンスターを出現させる際、フラグをチェックするように変更（npc_job_17rogue.txt）

----------------------------------------
//0581 [2009/01/06] by Cocoa

・ガンスリンガーのSPが一部以上だった不具合修正（job_sp_db.txt）
	reported by hancho3さん

・マーチャントクエストで判定するスキルが異なっている不具合修正（npc_quest_tutorial.txt）
	thanks to Toshiさん

・スクリプトエラーが発生する不具合修正（npc_event_newyeaar.txt）
	thanks to Toshiさん

・NPC_REBIRTHで復活したモンスターを倒してもイベントが発生しないように修正（mob.c）

----------------------------------------
//0580 [2009/01/04] by Rayce

・shopのアイテムの売り値が買い値を越える可能性がある場合、
　警告を表示するように拡張（map.c, npc.c, pc.c）

	※売り値および買い値は以下の4つの補正を受けますが、売り値の
	　最高値と買い値の最安値を計算した上で判定を行っています
		* ディスカウント
		* コンパルションディスカウント
		* オーバーチャージ
		* マーダラーボーナス

・DUPEの事故防止のため、shopの販売値は全て-1にする（script/npc/*）

	※-1の場合はitem_db.txtで設定したPriceを参照します
	　script/sample内のスクリプトについては、現状維持とします

----------------------------------------
//0579 [2009/01/04] by Rayce

・conf/login_auriga.conf の detect_multiple_login が0のとき、
  MAPサーバで二重loginを検出する際の条件判定が間違っていたのを修正（pc.c）

・areamonster命令で "this" 指定が作動していなかったのを修正
　それに伴い、monster命令の "this" 指定の仕様変更
　（atcommand.c, mob.*, script.c, skill.c）

	-> 今までは実行プレイヤーのMAPを参照していましたが、他のスクリプト命令/関数と同様に
	   NPCのMAPを優先して参照し、NPCが居ないときにプレイヤーのMAPを参照します。
	   monster命令で "this" 指定を使っている人は、挙動が変わっていないかどうか
	   確認してください。

----------------------------------------
//0578 [2008/12/19] by Cocoa

・MAX_ITEMGROUPを12に変更（map.h）
	おいしい魚や化け物のエサの回復量の異常が修正されます。

----------------------------------------
//0577 [2008/12/19] by Cocoa

・item_db2.txtを更新
	thanks to Toshiさん

・item_group_db.txt、item_db.txtを修正

・各砦内に設置されていたギルドフラッグを撤去

----------------------------------------
//0576 [2008/11/30] by Blaze

・monster出現情報のxs,ys範囲が半径指定ではなく直径になっていたのを修正
	（monster.c）

・上記修正に伴い、モンスター出現スクリプトの暫定処理を最適化
	（script/monster/***）

----------------------------------------
//0575 [2008/11/25] by Rayce

・timer.cを少し最適化（timer.c）

・0567以降、*.dspを用いてコンパイルが出来なかったのを修正
・doc/script_ref.txtを少し修正

----------------------------------------
//0574 [2008/11/23] by Blaze

・スクリプト命令「announce」に、攻城戦メッセージ機能を追加
　（clif.c, intif.c, doc/script_ref.txt）

・上記機能をGvGスクリプトに適用
　（npc_gvg_exe.txt, npc_gvg_steward.txt）

----------------------------------------
//0573 [2008/11/23] by Blaze

・プレイヤーを指定方向にノックバックさせる「pushpc」命令を追加
　（script.c, doc/script_ref.txt）

・名もなき島の「借金返済クエスト」NPC実装
　（npc_quest_nameless.txt）

----------------------------------------
//0572 [2008/11/22] by Rayce

・0570を少し修正（npc.c, script.c, unit,c）
・0571を少し修正（script.c）

----------------------------------------
//0571 [2008/11/21] by Cocoa

・プレイヤーが詠唱中かどうか判定する関数「checkcasting」を追加
	（script.c, script_ref.txt）

・定数を追加
	（const.txt）

・支援系スキルスクロールの修正
	（item_db.txt）

----------------------------------------
//0570 [2008/11/15] by Blaze

・AthenaProject Rev.499, Rev.518よりmerge
　（npc.*, map.h, unit.c, mob.c, doc/script_ref.txt）
	-> NPC接触判定にMob対応のOnTouchNPCラベルを追加
	-> モンスター出現時にOnTouchNPC判定をするように修正

・AthenaProject Rev.502, Rev.504よりmerge
　（script.c, npc_quest_kiel.txt）
	-> スクリプト命令「warp」をMob対象でも対応化
	-> 機械人形工場1FのクエストエリアにMob禁止NPCを実装

・AthenaProject Rev.500よりmerge
　（npc_town_rachel.txt）
	-> ラヘルクエストの一部NPCにOnTouchNPC実装

----------------------------------------
//0569 [2008/11/13] by Rayce

・サーバースナップショット（version.h）

・不要なファイルを削除
	db/random/*.txt
	db/mob_branch.txt
	db/mob_poring.txt
	db/mob_boss.txt
