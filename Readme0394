----------------------------------------
//0538 [2008/09/21] by Rayce

・0374で、非暗号化ログインで且つクライアントからのアカウント作成を許可
  （login-auriga.confのnew_accountが1）しているとき、パスワードに @ を
  付けないとサーバクラッシュするバグを修正（login.c）

・Mobの死亡時スキルは、コマンドやスクリプトでの死亡でないときのみ
  発動するように修正（mob.c）
	merged from eA, thx a lot!!

・mobskill_use() で、MSS_DEADを優先するように修正（mob.c）
・numdb_cmp() における大小比較をintptr型からuintptr型に変更（db.c）

----------------------------------------
//0537 [2008/09/21] by Rayce

・メモリマネージャに関する修正（malloc.c）
	-> ポインタのアドレスを計算するときにはuintptr型を使うように修正
	-> _WIN64のときの制限を撤廃
	-> メモリリーク記録用のログファイル名の生成処理において、
	   バッファオーバーフローが発生する可能性を修正

・numdb_cmp() における大小比較は、ポインタのアドレスでも計算できるように
  intptr型で演算する（db.c）
・不要なキャストを削除（login.c, clif.c, map.h）
・db_init() で、不要な初期化を省略（db.c）

----------------------------------------
//0536 [2008/09/21] by Blaze

・スクリプト関数「getonlinepartymember」でパーティー未所属だった場合、
　返り値がおかしかったのを修正
	thanks to Rayceさん
	（script.c）

・ギルドの接続人数を返すスクリプト関数「getonlineguildmember」を追加
	（script.c, script_ref.txt）

・0534でwarp処理に関するスクリプトが巻き戻っていたのを修正
	thanks to Rayceさん
	（npc_misc_zonda.txt、npc_warp_town.txt）

・0534でmoc_fild16のモンスター出現情報が誤って無効になっていたのを修正
	（npc_monster_mocfild.txt）

・ayo_dun02のモンスター出現情報を修正
	（npc_monster_ayodun.txt）

・新スロットエンチャント実装、旧スロットエンチャントの成功確率を修正、
　拡張性を考慮し、処理の書式を全面的に変更
	（npc_quest_slotenchant.txt）

・以下の二次職クエストスキルの取得NPC実装
	ベナムナイフ、ソニックアクセラレーション、ファンタズミックアロー
	パンボイス、クローズコンファイン、レジストポーション
	（npc_quest_skillget2.txt）

・ベインスクエスト「スパイ疑惑」の一部NPCを魔王モロク変更に対応
	（npc_town_veins.txt）
	
・本鯖で変更された精錬NPCの手数料を適用
	（npc_misc_refine.txt）

----------------------------------------
//0535 [2008/09/20] by Rayce

・WBUFPOS, WBUFPOS2 を修正（clif.c）
	merged from eA, thx a lot!!

・念のため、マップ移動中には露店と取引の処理を行わないように強化（trade.c, vending.c）
・trade_check() の引数を変更（trade.c）

----------------------------------------
//0534 [2008/09/20] by Blaze

・パーティーの接続人数を返すスクリプト関数「getonlinepartymember」を追加
	（script.c, script_ref.txt）

・魔王モロクNPC追加・モロクNPCの変更
	（npc_town_morocc.txt）
	
・魔王モロクで変更されたNPCを対応
	（npc_misc_inn.txt, npc_misc_board.txt, npc_misc_refine.txt,
		npc_misc_zonda.txt, npc_quest_cooking.txt, npc_quest_ice.txt）

・魔王モロク追加マップの読み込み定義を追加
	（map_auriga.conf）

・魔王モロク追加マップのマップフラグ設定を追加
	（mapflag.txt）

・魔王モロク追加マップのモンスター出現情報を追加
	（npc_monster_mocfild.txt）

・魔王モロク追加マップのワープ定義を追加・修正
	（npc_warp_fild.txt, npc_warp_dun.txt, npc_warp_town.txt）

----------------------------------------
//0533 [2008/09/19] by Rayce

・0531のwarp命令に関する仕様を若干変更（script.c）
	suggested by apacheさん

	warp関連のスクリプト命令においてMAP名を指定する際、".gat" が不足していても
	内部的に自動補完し、動作できるようにします。
	ただし、AthenaProjectとの互換性を保持するために用意されています。
	".gat" を付けている場合に比べ処理速度は低下します。
	従って出来る限り ".gat" を記述することを推奨します。

・プレイヤーの最終ログインマップ名に ".gat" が不足していたとき
  バッファオーバーフローが発生する可能性を修正（char.c）

・0523以降、pc_setpos() でアクセスバイオレーションが発生していたのを修正（pc.c）

----------------------------------------
//0532 [2008/09/17] by Rayce

・0356以降、MAX_LEVELのときの基本SP値が0になるバグを修正（status.c）
	reported by 花咲香里さん

----------------------------------------
//0531 [2008/09/17] by Rayce

・0523以降、一部のスクリプトのwarp命令が動作しないバグを修正
	reported by apacheさん

	warp命令などのMAP名を指定するスクリプト命令/関数については
	常に ".gat" を付けるように統一します。
	".gat" が不足している場合は動作しない可能性が高いので注意してください。

----------------------------------------
//0530 [2008/09/16] by Rayce

・特定幅のint型を定義（utils.h）
	整数のサイズが固定で必要な場合に利用します
	uintptr, intptr はポインタのアドレス計算に使用します
	AthenaProjectではなくeAの指針がベースとなっているので注意してください

・atn_int64型はint64型に置換（utils.c）
・サーバ起動時に特定幅のサイズを確認する（core.c）

----------------------------------------
//0529 [2008/09/13] by Rayce

・MVP獲得者がホムで、主人がMVPアイテムを重量オーバーで所持できないとき、
　nullpoエラーが表示されるバグを修正（mob.c）
	merged from fix by ultramage on AthenaProject, thanks a lot!!

・ポインタへキャストする際のwarningを修正（unit.c）

・0515のdbやconfファイルの空行読み飛ばしにおいて、UNIX環境下で改行コードが
　CR/LFの場合を考慮してなかった問題を修正

----------------------------------------
//0528 [2008/09/13] by Rayce

・map_freeblock_lock() 中に同一のポインタが複数回 map_freeblock()
　されると、二重freeが発生する問題を修正（map.c）
	バッファを配列からtreedbに変更することで、同一のポインタが
	バッファに重複して登録されないようになります。
	従って map_freeblock() を重複して呼び出しても安全です。
	また BLOCK_FREE_MAX は撤廃されたので、バッファに蓄積できる
	量は無制限になります。

・0516をさらに強化して、スキルユニット設置時にサーバクラッシュが
　発生する可能性の対策（skill.c）

----------------------------------------
//0527 [2008/09/13] by Rayce

・malloc, calloc, realloc, strdup, free の #define 置換を廃止（malloc.*）
	aMalloc, aCalloc, aRealloc, aStrdup, aFree のマクロ群とは
	完全に分離されます。
	上記マクロを利用しない場合、メモリマネージャで管理されなくなります。
	40kBを越える巨大なメモリを確保する必要があって、確実にメモリリーク
	しないことが保証できる場合にのみ利用してください。

・treedbで使用するメモリプールは、callocでアロケートするように変更（db.c）
・check_ttl_wisdata() の処理を最適化（inter.c）

----------------------------------------
//0526 [2008/09/13] by Rayce

・スキルユニットグループに関連するキャスト問題バグ対策
　（map.*, pc.c, skill.c, status.c, unit.c）

	変更前
		status_change_start(bl,SC_ANKLE,sg->skill_lv,(int)sg,0,0,sec,0);
		    ↓
		struct skill_unit_group *sg = (struct skill_unit_group *)sc->data[SC_ANKLE].val2;
	変更後
		status_change_start(bl,SC_ANKLE,sg->skill_lv,sg->bl.id,0,0,sec,0);
		    ↓
		struct skill_unit_group *sg = map_id2sg(sc->data[SC_ANKLE].val2);

	スキルユニットグループについても、アドレスをintにキャストして保存する方法を廃止します。
	skill_unit_group型のデータを参照するときには、必ず map_id2sg() を経由してください。
	またスキルユニットグループをID管理する必要があるので、skill_unit_group構造体に
	block_list構造体を追加しています。
	BL_CHATと同じくブロックリストには繋がれません。

----------------------------------------
//0525 [2008/09/13] by Rayce

・マップ移動の最中は clif_parse_LoadEndAck 以外のパケットを
　受け付けないように修正（clif.c）
	reported by alucardさん

　※マップ移動後からマップロードまでの間に、不正なパケットを
　　受信することによってDupeが発生していたのが修正されます

・nullpoチェック強化（clif.c）

----------------------------------------
//0524 [2008/09/08] by Rayce

・battle_auriga.confの player_land_skill_limit がyesのときの地面スキルの
  設置個数の計算は skill_count_unitgroup() を使うように修正（skill.c）
・skill_initunitgroup() からダンスの処理を分離（skill.c）

----------------------------------------
//0523 [2008/09/07] by Rayce

・0516で、bEternalStatusChangeの発動判定が間違っていた致命的なバグを修正（status.c）
・map名に ".gat" が含まれているかどうかの判定は不要なので削除（char.c, pc.c）
・一部の関数の引数にconstを付与（char.c, chrif.*, map.*）

----------------------------------------
//0522 [2008/09/06] by Rayce

・AthenaProject Rev.548よりmerge、thanks to ico776さん
	スキルユニットの発動範囲読み込み処理を拡張し、
	発動範囲をスキルレベル毎に設定できるように修正（skill.*）

・0519で、core_ExceptionRoutine() の漏れを修正（core.c）
・不要なキャストを削除（db.c）
・ギルドデータ受信時、トリッキーなmemcpyを使わないように修正（guild.c）
・nullpoチェック追加（skill.c）

----------------------------------------
//0521 [2008/08/31] by Rayce

・0520で、script_free_stack() においてポインタを参照してなかったバグを修正（script.c）
・0520で、push_copy() におけるC_PTRの処理が間違っていたので修正（script.c）
・0520で、コンパイルオプション DEBUG_VARS の除去が不完全だったのを修正
  （bcc32_make.bat, vc_make.bat, doc/server_build.txt）

----------------------------------------
//0520 [2008/08/31] by Rayce

・使用された変数の一覧を出力するコンパイルオプション DEBUG_VARS を
  script_auriga.conf でスイッチするように変更（script.c）

・callfunc, callsub は、バイトコードと関数依存変数の情報を push_ptr() で
  pushするように修正（script.*）

・スタックを拡張する部分を expand_stack() として共通化（script.c）

----------------------------------------
//0519 [2008/08/31] by Rayce

・pid_create() を少し修正（core.c）
・core_ExceptionRoutine() を少し修正（core.c）
・不要なintのキャストを削除（graph.c）
・map_foreachinarea() のエラー時の出力を少し修正（map.c）

----------------------------------------
//0518 [2008/08/27] by Rayce

・Athena Rev.505より部分的にmerge、thanks to Blazeさん（grfio.c, map.c）
	-> 水場の高さをrswファイルから読むように
	-> conf/water_height.txtはrswの高さをオーバーライドする際に利用する
	   デフォルトでは未記入状態
	-> mapキャッシュ読み込み時、conf/water_height.txtに記述があるmapに
	   対してのみ水場が変更されていないかのチェックを行う

	※mapキャッシュを利用している方は、map.infoを削除して再度
	  作成し直して下さい
	※rswファイルが変更されてもmapキャッシュの自動再作成は行われないので、
	  その場合はmapキャッシュを削除してから再度作成し直して下さい

・conf/water_height.txtで、高さを省略した場合は全水場になるように修正（map.c）
	機能が中途半端で動作していなかったので有効化
	mapflagのrainを指定しなくても全てのセルを水場に設定できます

・conf/water_height.txtはmap_auriga.confの読み込みが終わった後に
  読み込みを行うように変更（map.c）

・map読み込み時、128MAP単位でメモリを拡張するように改善（map.c）
・map名の拡張子が .gat かどうかのチェックは map_readallmap() ではなく
  map_addmap() で行うように変更（map.c）

・BLOCK_FREE_MAXを超過したとき、blockがfreeされないのを修正（map.c）

----------------------------------------
//0517 [2008/08/23] by Rayce

・add_timer_real() のdataをint型からvoid型のポインタに変更
	ポインタをintにキャストすることなく、そのまま渡すことができます

・add_timer_real() のidはfreeできないように変更（timer.*）
	TIMER_FREE_ID, TIMER_FREE_DATA は廃止

----------------------------------------
//0516 [2008/08/23] by Rayce

・子守唄設置時にサーバクラッシュするバグを修正（status.c）
	reported by mccainさん

	SC_LULLABY で skill_additional_effect() 内で合奏の相方が睡眠状態になると
	合奏が停止してしまい、スキルユニットグループが不定になるのが原因。
	status_change_timer() を map_freeblock_lock() で保護するようにしました。

・skill_unitsetting() で、全てのユニットの設置が終わってから
  直上スキルを発動させるように修正（skill.c）

・地面設置スキルを使用時、ランドプロテクターなどによってスキルユニットの生成が
  妨害されると、MAP移動やログアウトをしない限りスキルユニットグループが解放
  されないメモリリークを修正（skill.c）

----------------------------------------
//0515 [2008/08/20] by Rayce

・OnGuildBreakラベルが作動しないバグを修正（guild.c）
	reported by Cocoaさん

・skill_unit_timer() で、map_freeblock_lock/unlockが二重に呼ばれるのを修正（skill.c）
・dbやconfファイル読み込み時、空行は読み飛ばすように改善

----------------------------------------
//0514 [2008/08/17] by Rayce

・size_tやポインタのアドレス計算部分に関する型を修正
	strlenの型など、出来る限りキャストしないようにする

・script.cでwarningが発生する可能性を修正（script.c）
・skill_unit_onplace() の細かい変更（skill.c）

----------------------------------------
//0513 [2008/08/09] by Rayce

・menu/select命令に関して（script.c）
	-> 選択肢の文字列が : で始まるとき、: のメニュー補正が機能しないバグを修正
	-> 第1引数が空文字のとき、パケット送信用の文字列に余計な : を付加しないように修正
	-> 引数が1つのときは、パケット送信用の文字列組み立てを省略するよう最適化
	-> 不要な変数の初期化を削除

・スクリプトにprintarray関数を追加（script.c）
	配列の要素を文字列に変換します
	デフォルトの区切り文字は ":" となっているので、そのままselect関数に
	渡すことができます

	例）setarray '@buf$,"aaa","bbb","ccc";
	    set '@n,select(printarray('@buf$));	// aaa bbb ccc のメニュー

	また任意の区切り文字も設定可能です。

	例）setarray '@buf$,"ddd","eee","fff";
	    mes printarray('@buf$, "\n");	// ddd eee fff が1行ずつ表示

・0512で発生するコンパイル時の警告修正（script.c）

----------------------------------------
//0512 [2008/08/08] by Rayce

・0510のskill.cのコーディングを巻き戻し（skill.c）
	db/skill_db.txtのinf2を 3072 にすることで、自分とPT/ギルドメンバーのみに
	使用可能になるので不要

・0511でareawarp命令の書式が巻き戻されているので書き直し（script.c）
・doc/script_ref.txtを少し修正

----------------------------------------
//0511 [2008/08/07] by Cocoa

・npc_morocc.txtで職業変数の定義が間違っていた不具合修正

・Athena Rev.497よりmerge、thanks to Blazeさん
	-> スクリプト命令「mapwarp」追加

----------------------------------------
//0510 [2008/08/07] by Cocoa

・Athena Rev.287よりmerge、thanks to ico776さん
	-> 攻撃属性付与スキルを、自身とパーティーメンバーに対してのみ使用できるように修正

----------------------------------------
//0509 [2008/08/04] by Cocoa

・0506でのstatus.cの記述が変だったので修正

・Athena Rev.510よりmerge、thanks to Blazeさん
	-> 魔王モロククエスト実装
	-> 関連マップのマップフラグ追加

・Athena Rev.512よりmerge、thanks to Blazeさん
	-> 名も無き島新規追加モンスターのスキル追加

----------------------------------------
//0508 [2008/08/01] by Cocoa

・Athena Rev.452よりmerge、thanks to nanashiさん
	-> GMキャラクターの全スキルリストにNPCスキルが紛れ込んでいたのを修正

・Athena Rev.455よりmerge、thanks to Blazeさん
	-> モスコビア関連マップのwarp追加

----------------------------------------
//0507 [2008/08/01] by Cocoa

・Athena Rev.412よりmerge、thanks to Blazeさん
	-> ラヘルとベインスのジョンダ職員に空間転送機能を追加

・Athena Rev.416よりmerge、thanks to Blazeさん
	-> モスコビア追加マップのmonster定義を追加

・Athena Rev.417より一部merge、thanks to Blazeさん
	-> モスコビアNPC実装

・Athena Rev.418よりmerge、thanks to Blazeさん
	-> モスコビアの案内要員とカプラ職員NPCを追加

----------------------------------------
//0506 [2008/08/01] by Cocoa

・Athena Rev.413よりmerge、thanks to Blazeさん
	-> 名も無き島関係マップのwarp定義を追加
	-> ベインスwarp名修正

・Athena Rev.414よりmerge、thanks to Blazeさん
	-> 名も無き島の秘密クエストNPC実装
	->プロンテラとラヘルの名も無き島関連NPCの修正
	-> map_auriga.confに名も無き島関連ファイルを定義追加

・Athena Rev.415よりmerge、thanks to Blazeさん
	-> モスコビアのwarp定義を追加

・Athena Rev.417より一部merge、thanks to Blazeさん
	-> map_auriga.confにモスコビア関連ファイルを定義追加

・Athena Rev.486よりmerge、thanks to nanashiさん
	-> アサテンプレ、ROratorioを参考に最大HP/SP計算式修正(status.c)

----------------------------------------
//0505 [2008/07/30] by Cocoa

・プレイヤーからエフェクトを発生させるmisceffect2命令を実装（script.c）
	-> script_ref.txtにmisceffet2命令の記述を追加
	-> npc_quest_skillget2.txtのgmcommandをmisceffect2に置き換え

・Athena Rev.419よりmerge、thanks to Blazeさん
	-> 名も無き島とモスコビア関連マップのmapflagを設定

・Athena Rev.437よりmerge、thanks to frankenさん
	-> カニカードのセット効果でおさしみではなく貝をドロップしていた不具合を修正

・Athena Rev.490よりmerge、thanks to yuyuyuさん
	-> チュンイーカードでCritical-5されていた部分を削除

----------------------------------------
//0504 [2008/07/30] by Cocoa

・Athena Rev.494よりmerge、thanks to yuyuyuさん
	-> サイコロゲームで勝ちと負け両方のメッセージが出ていたのを修正

・Athena Rev.501よりmerge、thanks to Blazeさん
	-> ゲフェンNPCに吟遊詩人クエストを実装

・Athena Rev.506よりmerge、thanks to frankenさん
	-> 名も無き島修道院のmapflagを設定

----------------------------------------
//0503 [2008/07/30] by Cocoa

・Athena Rev.515よりmerge、thanks to Blazeさん
	-> セージ転職クエストNPC実装

・Athena Rev.516よりmerge、thanks to Blazeさん
	-> 2次職クエストスキルNPC追加

・Athena Rev.517よりmerge、thanks to Blazeさん
	-> 1次職クエストNPC実装

----------------------------------------
//0502 [2008/07/29] by Cocoa

・0501でコンパイルが通らない不具合修正（skill.c）

----------------------------------------
//0501 [2008/07/28] by Cocoa

・Athena Rev.295よりmerge、thanks to Arc87さん
	-> 一セルに栽培可能な数を一つまでに限定（skill.c）

・Athena Rev.349よりmerge、thanks to nanashiさん
	-> skill_db.txt内の誤表記を訂正

----------------------------------------
//0500 [2008/07/28] by Cocoa

・Athena Rev.342よりmerge、thanks to Forestさん
	-> アーチャー試験でスナイパーが転職出来てしまうバグを修正

・Athena Rev.343よりmerge、thanks to Forestさん
	-> リヒタルゼン治安維持員の判定不備を修正

・Athena Rev.346よりmerge、thanks to ico776さん
	-> モンスターのアイテムルート範囲を8セルから10セルに修正（mob.c）

----------------------------------------
//0499 [2008/06/29] by Rayce

・ギルド倉庫に装備品が840個以上あると、蔵が強制終了する問題の対策（scoket.*, clif.c）
	蔵が１度に受け取れるパケットサイズは21820byteまでです。
	これを超過すると強制終了します。
	AthenaはRev.98でMAX_GUILD_STORAGEを1000から800に縮小していますが、
	縮小はせずにパケットを分割して送信する方法を採用しました。

	-> 最小限確保するパケットの空き容量を SOCKET_EMPTY_SIZE として定義
	-> SOCKET_EMPTY_SIZE を16KBから20kB（21820byte以下）に拡張する
	-> カプラ倉庫とギルド倉庫の処理をまとめる
		clif_storageitemlist_sub()
		clif_storageequiplist_sub()
	-> 倉庫パケットのサイズが SOCKET_EMPTY_SIZE を超過した場合は分割する

	※パケット分割しないといけないほど倉庫のアイテム数が多い場合、アイテムの
	  リストが表示されるまでかなりの時間が掛かります。

----------------------------------------
//0498 [2008/06/22] by Rayce

・IDが0のタイマーを delete_timer() で削除できないバグを修正（timer.c）
	merged from eA, thx a lot!!

・状態異常アイコン SI_*** の定義をAegisから補完（status.h）
	thanks to しゃずさん

----------------------------------------
//0497 [2008/06/21] by Rayce

・Athena Rev.330よりmerge、thanks to mizukiさん
	-> __WIN32は定義されていないため、ソケットハンドルがリークしていたのを修正（socket.c）

・includeを修正（journal.*, md5calc.c）
・clif_skillinfoblock() を蔵のパケット解析方法に合わせるように少し修正（clif.c）

----------------------------------------
//0496 [2008/06/01] by Rayce

・conf/char_auriga.confに check_status_polygon を追加（char.c）
	キャラ作成時のステータスポイントに制限を掛けることができます。

	0のとき：
		制限なしです。
		蔵の "Free-Form Stats Polygon" を有効にしていて、各ステータスを
		全て9にしたいとき設定します。
	1のとき：
		各ステータスの合計を30以下に制限します。
		0495以前と同じ形式です。
	2のとき：
		デフォルトです。
		STR+INT=10, AGI+LUK=10, VIT+DEX=10 に制限します。
		"Free-Form Stats Polygon" を有効にしていないの蔵で、
		意図しない不正なステータスが指定されるのを防止します。

・2008-05-28aSakexeに対応
	-> MAX_PACKET_DB を 0x400 に拡張（clif.h）
	-> ステータス異常アイコン SI_*** に追加分のコメントを記述（status.h）
	-> db/packet_db.txt更新
	-> doc/client_packet.txt更新

----------------------------------------
//0495 [2008/05/31] by Rayce

・0494でコンパイルできなかったのを修正（core.c）
	reported by seikaiさん

・キャラクタースロットを12まで拡張（char.*）
	conf/char_auriga.confの max_char_slot を12すれば、
	1アカウント当たり12キャラまで作成可能です。
	12よりも大きなキャラを扱いたい場合は、char.hの MAX_CHAR_SLOT の値を
	拡張する必要があります。

----------------------------------------
//0494 [2008/05/27] by Rayce

・srand() には gettick() ではなく現在時刻を渡すように修正（core.c）
・csvdb_open() を少しだけ最適化（db.c）
・0412で、１行当たり読み込める最大文字数の拡張が一部適用されてなかったのを修正（npc.c）

----------------------------------------
//0493 [2008/05/25] by Cocoa

・植物栽培でスキルレベルに関わらずきのこを生成していた不具合修正

----------------------------------------
//0492 [2008/05/09] by Cocoa

・AthenaProject Rev.237よりmerge、thanks to ico776さん
	-> アイテムボーナスHPPenaltyTimeで負数を設定した場合、nミリ秒でhpが回復するように修正（pc.c）

・AthenaProject Rev.238を参考に修正、thanks to ico776さん
	-> NPCスキル「自爆」のダメージが軽減できなかった不具合を修正（battle.c）
	-> NPCスキル「自爆」はシーズ補正を受けないように修正（battle.c）

・AthenaProject Rev.239よりmerge、thanks to ico776さん
	-> GMハイド状態のPCが全てのキャラクターを対象とするスキルの効果を受けていたのを修正（battle.c）

----------------------------------------
//0491 [2008/05/07] by Rayce

・ギルド倉庫のデッドロック検出を実装（char.c, int_storage.*, inter.c, intif.*, storage.*）
	誰もギルド倉庫を使ってないのに、倉庫が開けなくなる現象に対する暫定対策。
	1時間おきにギルド倉庫がデッドロックになっていないかチェックします。
	デッドロックになっていた場合は、自動的にロックが解除されます。

	通常、デッドロックは起こり得ないはずですが、もし
	「guild_storage_deadlock_timer: storage deadlocked!! (???)」が出力された
	場合には、速やかにご報告をお願いします。

----------------------------------------
//0490 [2008/05/06] by Rayce

・コンソールに表示するバージョン番号を、Readmeから参照するように（login.c, char.c, map.c）
	common/version.cを追加
  	取得に失敗した場合は、AURIGA_REVISIONの値を使用する

・AURIGA_MOD_VERSION は意味がないので、代わりにReameのバージョンを参照する（login.c, clif.c）
	管理用パケット0x7531のパケット長を拡大
	tool/ladmin, tool/checkversion, tool/php/auriga.php を修正

・txt-converter.exeにもバージョン番号を表示するように（converter.c）
・MAPサーバのコンソールに、タグ名 map_server_tag を表示するように（map.c）
・サーバ起動時にPACKETVERを表示するように（core.c）
・warning修正（login.c, party.c）

----------------------------------------
//0489 [2008/05/06] by Rayce

・0327以降、ギルドスキルが発動しなくなっていた致命的なバグを修正（clif.c）
	reported by しゃずさん

・0488のルアフの部分をさらに修正（status.c）
・二項代入演算で桁落ちが発生していたのを修正（battle.c, status.c）

----------------------------------------
//0488 [2008/05/01] by Cocoa

・AthenaProject Rev.332よりmerge、thanks to nanashiさん
	-> 氷晶落（氷柱落とし）の範囲を自分中心7x7セルに修正

・AthenaProject Rev.328よりmerge、thanks to nanashiさん
	-> サイトブラスターでクローキング、ハイディングを解除できないように修正
	-> MATK倍率を等倍に変更

・AthenaProject Rev.326を参考に修正
	-> サイト、ワイドサイト、ルアフ、集中力向上、ディテクティングでインビジブルを解除できるように修正

----------------------------------------
//0487 [2008/05/01] by Cocoa

・AthenaProject Rev.291よりmerge、thanks to Blazeさん
	-> ベインスNPC修正・追加
	-> ベインスクエスト修正

----------------------------------------
//0486 [2008/04/19] by Cocoa

・AthenaProject Rev.306よりmerge、thanks to Blazeさん
	-> モンスターのステータスでASPDよりaMotionが高ければaMotionの値を攻撃速度に用いるように修正
	-> mob_dbの暫定数値の全修正と最新化（Thx huge cgi）

----------------------------------------
//0485 [2008/04/14] by Cocoa

・特定の条件でクリティカルダメージが増加しない不具合修正（battle.c）

・AthenaProject Rev.265よりmerge、thanks to Arc87さん
	-> 料理材料の再修正 

・AthenaProject Rev.281よりmerge、thanks to miyajiさん
	-> 「十字架のヘアバンド」作成クエストの成功アイテムIDが小悪魔帽になっていたのを修正 

・AthenaProject Rev.282よりmerge、thanks to Arc87さん
	-> 「ピアノの鍵盤クエスト」と「TheSignクエスト」で魔女の処理に不都合が出ていたのを修正

・AthenaProject Rev.284よりmerge、thanks to Blazeさん
	-> 名も無き島アップデート関連のモンスター出現情報を最新化 

・細々した点を修正（npc.c）

----------------------------------------
//0484 [2008/04/07] by Rayce

・キャラ削除時はパーティIDとギルドIDの0初期化は不要なので、0483を修正（int_guild.c, int_party.c）
・SQL: キャラ削除時に `hotkey` テーブルからデータが削除されるように修正（char.c）

----------------------------------------
//0483 [2008/04/07] by Rayce

・ログインしていないキャラをパーティから除名すると、除名できなかったり
　「party: check_member ???[???] is not member」が出力されるバグを修正（char.h, int_party.c）

・int_party.cと同様の処理をギルドにも施す（int_guild.c）

----------------------------------------
//0482 [2008/04/06] by Rayce

・パーティメンバーの照合はキャラ名ではなくキャラIDで行うように改善
　（int_party.*, inter.c, mmo.h, intif.*, party.*）
	-> party_member構造体にchar_idメンバを追加
	-> inter, mapサーバ間のパケットを一部変更

・意味のない関数 party_check_conflict() の呼び出しをコメントアウト（party.c）
・TXT: JOURNAL_IDENTIFIER を 08 に引き上げ（journal.c）

・0481の pc_steal_item() をさらに修正（pc.c）

----------------------------------------
//0481 [2008/03/24] by Cocoa

・AthenaProject Rev.203より一部merge
	-> スタン確率の判定式を修正（skill.c）
	thanks to Blazeさん

・AthenaProject Rev.233よりmerge、thanks to ico776さん
	-> ステータス固定系ボーナスで、-の値を設定できないように修正（status.c）
	-> アイテムボーナスbFixCriticalの最大値を100から無制限に修正（status.c）

・AthenaProject Rev.234を参考に修正、thanks to ico776さん
	-> ドロップ率0%のアイテムがスティール可能だった不具合修正（pc.c）

----------------------------------------
//0480 [2008/03/24] by Rayce

・0447以降、PACKETVERが14以上のときにギルド倉庫が開けなかったバグを修正（clif.c）
	reported by Cocoaさん

----------------------------------------
//0479 [2008/03/24] by Rayce

・0470以降、csvreadarray命令で正しいデータが取得できないバグを修正（script.c）
	reported by Cocoaさん

----------------------------------------
//0478 [2008/03/23] by Cocoa

・AthenaProject Rev.191より一部merge
	-> ストーンカースの成功率修正
	thanks to Rohypnolさん

----------------------------------------
//0477 [2008/03/23] by Cocoa

・AthenaProject Rev.293を参考に矢作成データベースを修正
	thanks to Shimodaさん

----------------------------------------
//0476 [2008/03/22] by Rayce

・AthenaProject Rev.294より、CSV命令/関数を使用するとサーバクラッシュするバグを修正（db.c）
	thanks to soriaさん

・砦の宝箱のGM専用デバッグモードが作動しなくなっていたのを修正（npc_gvg_tbox.txt）

----------------------------------------
//0475 [2008/03/16] by Rayce

・0470以降、キャラ永続変数が正しく取得できないバグを修正（script.c）
	reported by Cocoaさん

----------------------------------------
//0474 [2008/03/13] by Rayce

・0470以降、db/const.txtの埋め込み変数が正しく取得できないバグを修正（script.c）
	reported by Cocoaさん

----------------------------------------
//0473 [2008/03/09] by Rayce

・SQL: MySQLのAPIをラップしたsqldbs.c, sqldbs.hを追加
・SQL: INSERT文で、VALUESに複数の値のリストを指定しないように変更
・SQL: SQLサーバ接続時に、MySQLのバージョンを表示するように拡張

・SQL: テーブル名をdefineに変更し、sqldbs.hに集約
・SQL: loginテーブルで利用するフィールド名は、変数に格納せずに直接クエリ文に書き込むように変更（login.c）
・SQL: char_sql_loaditem() および char_sql_saveitem() で使用するenumの変数名を変更
       （char.*, int_storage.c）

　※converterはまだ変更を加えてません。
　　正式対応されるまで使用を控えてください。

----------------------------------------
//0472 [2008/03/07] by Cocoa

・カタール装備時に、右手修練、左手修練が適用されていた不具合修正（battle.c）

----------------------------------------
//0471 [2008/03/05] by Rayce

・[SQL] configで設定したcharsetがMySQLサーバに正しく反映されてなかった問題を修正
	（login.c, char.c, map.c, converter.c）

	MySQLサーバ接続時にSET NAMESを送っていましたが、SET NAMESだとクライアントの
	文字セットの情報を送るだけで、mysql_real_escape_stirng() には影響しないという
	現象がありました。
	代わりに mysql_options() で MYSQL_SET_CHARSET_NAME を設定するように変更しました。

	これにより、sjis以外（cp932など）のcharsetを設定しているのも関わらず、「表」の
	ようにSJISで0x5c（バックスラッシュ \）を末尾に含む文字列がクエリ発行できない問題が
	解消されます。

・[SQL] 052で実装した TRIM_ESCAPE_AS_SJIS のdefineを撤廃（utils.c）
	上記修正により、strecpy() の強引な拡張は不要になったため

・[SQL] converterの終了時に、mysql_close() が呼ばれてなかったのを修正（converter.c）

----------------------------------------
//0470 [2008/03/02] by Rayce

・db/const.txtに文字列を定数として設定できるように拡張（script.c）
	文字列の場合はポストフィックス$を付ける必要があります。
	C_STRとして扱い、解析時に直接文字列をバイトコードに書き込みます。

	例）db/const.txt
		FUGA$	string
	    呼び出し
		debugmes FUGA$;	// "string" を表示

・変数読み取り時に、プレイヤーにアタッチできなかった場合は初期値を入れるように修正（script.c）
	文字列 → ""
	数値   → 0

・add_str() で一度にメモリ確保するサイズを拡張（script.c）
	str_data 128 → 512
	str_buf  256 → 4096

・一部の関数の引数にconstを付与（script.*）
・script.cの細かい整形（script.c）

----------------------------------------
//0469 [2008/02/26] by Rayce

・キャラ一時変数に文字列を追加するとき、ダングリングポインタが発生するバグを修正（script.c）
	pc_setregstr() の *str と sd->regstr[] が同一アドレスの場合、aRealloc() の時点で
	*str がfree済みの領域を指していました。
	DEBUG_MEMMGRのdefineをオンにし、以下のスクリプトを実行すると再現できます。

	set @data1$,"dummy";
	set @data2$,@data1$;
	debugmes @data2$;

・一部の文字列にconstを付与する（pc.*, script.c）
・以下の関数を整理（script.c）
	conv_str()
	op_add()
	buildin_return()

----------------------------------------
//0468 [2008/02/19] by Rayce

・0458の１MAPサーバ当たり1023マップまでしか利用できない制限の撤廃が char_erasemap()
　にも適用されてなかったのを修正（char.c）

・AthenaProject Rev.185よりmerge、thank to Rohypnolさん
	bonus2 bWeaponAtkRateが正常動作しない可能性を修正（battle.c）
	正常動作しなかったおかげで結果うまく動いていたクリティカルダメージ対応

----------------------------------------
//0467 [2008/02/17] by Rayce

・バーサーク終了後、自然回復が停止するように修正（pc.c, status.*）
	SC_NATURAL_HEAL_STOP 追加
	効果時間は db/skill_cast_db.txt のupkeep_time2を利用
	デフォルトでは5分

・conf/battle_auriga.conf の free_sc_data_dynamically がyesのとき、一部の状態異常が
　正常に解除されないバグを修正（status.c）

----------------------------------------
//0466 [2008/02/16] by Rayce

・取り巻きが取り巻き召還をする際、召還可能な世代数を規定できるように拡張（battle.*, skill.c）
	conf/battle_auriga.confに summonslave_generation を追加。
	例えば2にすると2世代（孫）まで召還可能となり、3世代目以降の召還は行われません。
	デフォルトは0の無制限。

・@summonで呼び出されたモンスターは、NPC_SUMMONMONSTERおよびNPC_SUMMONSLAVEを使用できない
　ように変更（skill.c）
	0461以降、上記2つのスキルを使用すると、その呼び出したモンスターを攻撃してしまう
	問題が発生していました。
	攻撃せずに味方として認識させるためにはかなりの修正が必要になるので、0460以前と
	同じく使用不可扱いにしています。

----------------------------------------
//0465 [2008/02/16] by Rayce

・function構文のfunction名を配列として記述した場合、解析時にエラーとなるように修正（script.c）
	以下の例は今後解析時エラーとなります。

	function Test {
		debugmes "bbb";
		return;
	}
	Test[0];	// getelementofarray(Test,0) として解釈されていた

・0379以降、スクリプトにおいてfunction構文を宣言したあとにfunction構文の実体がある場合、
　実行時に「unknown command ? @ ?」が出力され実行が停止してしまう致命的なバグを修正（script.c）
	set_label() で C_POS ではなく C_USERFUNC_POS を書き込んでいたのが原因。
	実行時の get_com() で C_USERFUNC_POS がコマンドとして存在しないため
	エラーとなっていました。

・上記修正により、0462のモンク転職の修正は無意味になったので巻き戻し（npc_job_monk15.txt）

----------------------------------------
//0464 [2008/02/16] by Cocoa

・ポーションピッチャーのSP回復量が少ない不具合修正

----------------------------------------
//0463 [2008/02/16] by Rayce

・add_timer_func_list() を最適化して引数を減らす（timer.*）
・コンパイルオプション NO_HTTPD_CGI がオンのときは、外部cgi処理/中断リストタイマを
　起動しないように最適化（httpd.c）

----------------------------------------
//0462 [2008/02/15] by Cocoa

・モンク転職でメッセージが出なくなる不具合修正。

・アシッドデモンストレーションが近距離扱いになっていたのを修正（battle.c）

----------------------------------------
//0461 [2008/02/15] by Cocoa

・古く青い箱と古い紫色の箱でデフォルトアイテムが出やすかった不具合を修正

・取り巻きが取り巻きを召喚しない不具合修正（skill.c）
	マスターIDのチェックを抜いただけなので、取り巻きを召喚するMobが
	自分と同じMobIDを召喚すると無限に召喚するので注意してください。
	デフォルトでそんなMobはいないと思うので大丈夫だと思いますが…。

・ウィザード転職NPCのセリフ修正

----------------------------------------
//0460 [2008/02/12] by Rayce

・0456以降、読み込んだNPCの数が表示されなくなっていた問題を修正（npc.c）
	reported by seikaiさん

・OnAgitBreak, OnAgitEliminate の処理を最適化（guild.c）

----------------------------------------
//0459 [2008/02/11] by Rayce

・スキルユニットの性質（Flag）をスキルLv毎に指定できるように拡張（skill.*, unit.c）
	skill_split_strtol() 追加
	skill_get_unit_flag() の引数拡張

・レベルオーバーのメテオは壁チェックなしで貫通して落下するように再実装（db/skill_unit_db.txt）
	Lv11以上はFlagにUF_PATHCHECK（オブジェクト発生時に射線チェック）を付けない

----------------------------------------
//0458 [2008/02/11] by Rayce

・１MAPサーバ当たり1023マップまでしか利用できなかった制限を取り払う（char.c）
・MAPサーバ有効化時の出力メッセージを少し変更（char.c）

・0456のメテオストームに関する修正は間違っていたので巻き戻し（skill.c）
・run_script() を少し最適化（script.c）
・battle.cの細かい整形（battle.c）

----------------------------------------
//0457 [2008/02/11] by Rayce

・AthenaProject Rev.152よりmerge、thanks to Rohypnolさん
	管理者パケットをローカルホストに限定するオプションを追加（login.c）

・AthenaProject Rev.153よりmerge、thanks to Rohypnolさん
	武器修理を同時にお互いに実行しあうと無限ループに陥るバグを修正（clif.c）

・パケット0x1fa, 0x2b0でログインするとき、アカウント名が表示されるように修正（login.c）

----------------------------------------
//0456 [2008/02/10] by Rayce

・レベルオーバーのメテオは壁チェックなしで貫通して落下する（skill.c）
	reported by seikaiさん

・スクリプトにgetiteminfo関数を追加（script.c）
	関数名はeAと同名ですが、引数が異なるので注意。
	アイテムの持つ全てのデータを取得することができます。
	getiteminfo(<itemid>,0) と getitemid(<name>) は等価です
	getiteminfo(<itemid>,2) と getitemname(<itemid>) は等価です

・NPCファイル解析の部分を npc_parse_srcfile() として分離（npc.c）

----------------------------------------
//0455 [2008/02/10] by Rayce

・矢/弾丸の消費処理の改善（battle.c, skill.c）
	skill.cでのハードコーディングを廃止。
	db/skill_require_db2.txtに記載してさえあれば矢/弾丸を消費するスキルとなります。
	ただし、一部を除いてダメージが発生するスキルのみが有効です。

・グラウンドドリフトの処理改善（skill.c, db/item_arrowtype.txt, db/skill_require_db2.txt）
	item_arrowtype.txtに新しく5項目追加。
	今までは設置されるスフィアの種類をアイテムID13203〜13207で決め打ちしていましたが、
	item_arrowtype.txtの「arrow_type」で決めるように拡張します。
	アイテムID13203〜13207以外のアイテムをグラウンドドリフト用の弾丸として指定可能です。

	例１）13200,Bullet,バレット,1148
		バレット装備で風のグラウンドドリフトを設置
	例２）13205,Poison_Sphere,ポイズンスフィア,2048
		毒のグラウンドドリフト専用弾、通常攻撃では使用不可

----------------------------------------
//0454 [2008/02/10] by Rayce

・0452, 0453のエスマの修正部分を最適化（battle.c）
・クラッカーによるスタン効果時間が0秒になっていたのを修正（skill.c）
・クラッカー使用時に弾丸が消費されるように修正（skill.c）
・フリップザコインを失敗しても「スキル使用失敗」のメッセージが出ないように修正（skill.c）

・暗号化ログインパケット0x1faをサポート（login.c）
	langtypeが5のときに利用される模様

----------------------------------------
//0453 [2008/02/06] by Cocoa

・0452のmergeミスを修正（battle.c）

・AthenaProject Rev.218よりmerge、thanks to Blazeさん
	-> アルケミストスキル「安息」の条件判定で、基本HPを参照していたのを増減分もチェックするように修正（skill.c）

・AthenaProject Rev.221よりmerge、thanks to Blazeさん
	-> ハンタースキル「ビーストストレイフィング」の条件に「ダブルストレイフィング使用後」の判定がされていなかったのを修正（skill.c）
	-> ビーストストレイフィングに矢消費判定、使用時消費するように（battle.txt）

・AthenaProject Rev.229よりmerge、thanks to Shimodaさん
	-> フライング・トリプルアクション・ブルズアイの弾丸消費を修正（skill_require_db2.txt, battle.c, skill.c）

----------------------------------------
//0452 [2008/02/05] by Cocoa

・0451のスクリプトミスを修正

・AthenaProject Rev.174よりmerge、thanks to ViViさん
	-> エスマでマップサーバーがダウンする不具合を修正（battle.c）

----------------------------------------
//0451 [2008/02/05] by Cocoa

・AthenaProject Rev.161よりmerge、thanks to ViViさん
	-> チェイスウォーク解除時は詠唱無しに修正（unit.c）

・AthenaProject Rev.170よりmerge、thanks to Blazeさん
	-> スクリプト「emotion」で指定NPCが見つからなかった場合はアタッチ中のプレイヤーに表示させるように修正（script.c）
	-> それにともないscript_ref.txtを修正
	-> 全スクリプトからgmcommand命令を撤廃

----------------------------------------
//0450 [2008/02/02] by Rayce

・PACKETVER 9以降の番号を１つズラし、2007-05-21aSakexeを挿入（clif.c, pc.c）
	最新のPACKETVERは 13 → 14 に変更されています

・2007-05-21aSakexe以降のクライアントで、map_auriga.confの packet_parse_time を
　1以上に設定しないとMAPサーバにログインできない問題を修正（clif.c）
	merged from eA, thx a lot!!

・キャラクター作成時の失敗メッセージを修正（char.c）
・doc/client_packet.txt更新

----------------------------------------
//0449 [2008/01/31] by Rayce

・戦場チャットの下準備（clif.c）
	/battlechatに対応。
	ただし発言の受信は戦場システムの詳細が判明するまでは未実装。

・battle_auriga.confに check_player_name_battle_msg を追加（battle.*）
	ただし現時点では効果無し

・db/packet_db.txt更新
・doc/client_packet.txt更新

----------------------------------------
//0448 [2008/01/30] by Rayce

・PACKERVERが13以上のとき、パケット0x2ec, 0x2ed, 0x2efをサポート（clif.c）
	表示系パケットの上位版のようです。
	末端に付加された2Byteは用途不明。

----------------------------------------
//0447 [2008/01/29] by Rayce

・PACKERVERが13以上のとき、パケット0x2e8, 0x2e9, 0x2f0をサポート（clif.c）
	強化装備アイテムと同様に、消耗品/収集品にも使用期限が表示できるようになります。
	2008-01-02aSakexeよりも古いクライアントを使う場合は、PACKETVERを12以下に
	戻してください。

・カートおよび倉庫に使用期限付き消耗品/収集品を複数入れると、アイテムが１つにまとめられて
　個数だけ増えるバグを修正（pc.c, storage.c）

----------------------------------------
//0446 [2008/01/29] by Rayce

・PACKERVERが12以上のとき、通常攻撃ダメージパケットの上位版 0x2e1 をサポート（clif.c）
	PACKETVERを12に引き上げます。
	通常攻撃のダメージ表示の限界値が 32767 → 999999 に拡張されます。

----------------------------------------
//0445 [2008/01/29] by Rayce

・/huntingに対応する関数だけ実装（clif.c）
・db/packet_db.txt更新
・doc/client_packet.txt更新

----------------------------------------
//0444 [2008/01/28] by Rayce

・装備ウィンドウシステム実装（clif.*, map.h, party.*）
	merged from eA Forum, thx a lot!!

	装備を公開している相手の装備を見ることができます
	装備の公開はALT+E画面の下にあるチェックボックスをオンにするか、/eqopenを使うこと
	PACKETVERが11以上の場合に有効です
	現在のところは装備ウィンドウを表示した時点での装備しか見れず、相手が装備を付けたり
	外したりしても更新されません

・battle_auriga.confに equip_window_type を追加（battle.*, party.c）
	デフォルトは1で、パーティメンバーのみに表示されます
	2にすれば装備を公開している相手全ての装備を見ることができます

・db/packet_db.txt更新
・doc/client_packet.txt更新

----------------------------------------
//0443 [2008/01/28] by Rayce

・0442の太陽と月と星の融合に関するコードを少し最適化（battle.c）

・キャラ作成時の髪型/髪色の最大数は MAX_HAIR_STYLE, MAX_HAIR_COLOR を使うように修正（char.c）
・MAX_MOBSKILL を 64 → 40 に縮小（map.h）

----------------------------------------
//0442 [2008/01/27] by Cocoa

・AthenaProject Rev.240より一部merge、thx a lot!!
	-> mob_db.txtを080112時点での最新版に更新

・オシリスとドッペルゲンガーの召還する取り巻きが1匹になっていたのを修正（mob_skill_db.txt）

・太陽と月と星の融合状態でHPが20%未満の時、プレイヤー以外を攻撃しても即死するように修正（battle.c）

・battle_configのitemidentifyがyesでもスティールで取得する装備品は未鑑定だったのを修正（pc.c）

----------------------------------------
//0441 [2008/01/26] by Rayce

・AthenaProject Rev.141よりmerge、thanks to Blazeさん
	-> ダメージディレイ間のテレポートダメージキャンセル実装（battle.c）

・AthenaProject Rev.145を参考に修正、thanks to Blazeさん
	-> 幻覚状態時のダメージ表示式を修正、回避してもヒットストップするように（clif.c）
	-> battle_auriga.confの「錯覚スキルを無効にする」を「エフェクトを無効にする」に改名

----------------------------------------
//0440 [2008/01/22] by Cocoa

・AthenaProjectよりMob使用スキルをmerge、thanks to Blazeさん
	-> 初期〜Ep5、Ep6〜Ep10.2までのMob使用スキルを本鯖準拠に更新（Rev.99,120,228）
	Lv10のヒール、ファイアーボール、サイトラッシャー、ツーハンドクイッケンをLv11にしてあります。

・AthenaProject Rev.99より一部をmerge、thanks to Blazeさん
	-> Mobのスキル登録最大数を増加

・AthenaProject Rev.228より一部をmerge、thanks to Blazeさん
	->フェイヨン地下洞窟、ベインスフィールド、トール火山ダンジョンのモンスター出現情報を更新

----------------------------------------
//0439 [2008/01/21] by Cocoa

・AthenaProject Rev.204をmerge、thanks to Blazeさん
	-> 重量チェックの値がおかしかったのを修正
	-> ベインスクエスト「黒い石」のLv判定を追加 
	-> ラヘルクエスト「ブルーの行方」の結末修正 
	-> ニブルヘイムのカプラ職員の処理修正 
	-> 初心者修練場のメッセージ微修正

・AthenaProject Rev.222をmerge、thanks to ViViさん
	-> ルティエ：サンタの家ワープポイントバグ修正

・AthenaProject Rev.223より一部merge、thanks to Blazeさん
	-> クリスマスイベントモンスターの出現情報を最新に更新

・AthenaProject Rev.224をmerge、thanks to Shimodaさん
	-> インクリージングアキュラシーのコイン消費枚数を修正

・AthenaProject Rev.225をmerge、thanks to Shimodaさん
	-> ベインスアップデートにより、NPCから購入できるようになった銃を追加

----------------------------------------
//0438 [2008/01/21] by Cocoa

・AthenaProject Rev.227をmerge、thanks to Blazeさん
	-> 2006クリスマスイベントNPC修正
	-> 2007クリスマスイベントNPC実装
	-> イベントNPC「アマツ迎春泉水祭」（2008新年イベント）実装
	-> ラヘルNPC追加

----------------------------------------
//0437 [2008/01/21] by Cocoa

・AthenaProject Rev.251をmerge、thanks to Blazeさん
	-> 飛行船NPCの襲撃イベントの発動条件を修正

・AthenaProject Rev.252をmerge、thanks to Blazeさん
	-> 初心者修練場NPCの職業適性の判定結果格納変数を修正

・AthenaProject Rev.253をmerge、thanks to Arc87さん
	-> 茹でサソリの材料修正

----------------------------------------
//0436 [2008/01/21] by Rayce

・PACKETVERを11に引き上げる（clif.c）
	2007-11-06aSakexe以降がPACKETVER 11になります。
	キャラクター表示関連パケット、傭兵ステータスの既存パケット変更に対応。
	2007-11-06aSakexeより古いクライアントを使う場合にはPACKETVERを10以下に戻す必要があります。

・db/packet_db.txtを2008-01-08aSakexeまで対応
・doc/client_packet.txt更新

----------------------------------------
//0435 [2008/01/19] by Rayce

・0327以降、ナパームビートおよびナパームバルカンで複数の敵に使用すると
　"battle_calc_magic_attack: NAPALM enemy count=0 !" が出て、分散ダメージが
　当たらないバグを修正（skill.c）
	reported by Cocoaさん

・ブランディッシュスピアでLv11以上を考慮するように修正（skill.c）

---------------------------------------
//0434 [2007/12/02] by Cocoa

・status_calc_pcの加算base_atk処理をまとめて行うように修正（status.c）
・ボルケーノ、戦太鼓の響きで増加するATKをwatkからbase_atkに変更（status.c）
・魔法ダメージの軽減処理でsubraceが適用されていた不具合修正（battle.c）
・魔法ダメージの軽減処理でmagic_subsizeではなくsubsizeが適用されていた不具合修正（battle.c）

----------------------------------------
//0433 [2007/11/29] by Cocoa

・モンスターからモンスターに攻撃した際、mode0x40（固定ダメージ1）を無視していた不具合を修正（battle.c）

・0430の巻き戻しが不完全だったのを修正（pc.c）

----------------------------------------
//0432 [2007/11/29] by Cocoa

・スフィアマインで召還したマリンスフィアの自爆をヒールなどで中止させ、
　再びダメージを与えて移動させる際、移動速度がリセットされていなかった点を修正（mob.c）

・スキンテンパリングの火属性耐性値を修正（status.c）

----------------------------------------
//0431 [2007/11/27] by Cocoa

・AthenaProject Rev.178, 183をmerge、thanks to allegroさん, Rohypnolさん
	-> battle_athenaでシーズモード時のチャージアタックの移動効果の有無を設定できるように修正
		（battle_athena.conf, battle.*, skill.c）
	-> 一閃やティオアプチャギの移動効果がなくなっていたのを修正（skill.c）

----------------------------------------
//0430 [2007/11/25] by Cocoa

・0429で太陽と月と星の知識の適用が不完全だったので巻き戻し（status.c, pc.c）

・0429のmob_once_spawnを微修正（mob.c）

・AthenaProject Rev.177をmerge、thanks to allegroさん（skill.c ）
	-> チャージアタックにシーズモードでも移動効果の乗っていたものを修正

----------------------------------------
//0429 [2007/11/24] by Cocoa

・太陽と月と星の知識を指定したマップを出てもサーバーを移動しない限り適用される様に修正（status.c, pc.c）

・mob_once_spawnで座標を(0,0)以下に指定した際、マップとクラスが表示されるように修正（mob.c）

----------------------------------------
//0428 [2007/11/24] by Cocoa

・AthenaProject Rev.171, Rev.172をmerge、thanks to Blazeさん
	-> イベントNPC「ハロウィーン2007」実装
	-> イベントNPC「WMサーカス団」実装
	-> スーパーノービス転職NPCのメッセージ修正
	-> 拳聖転職NPCの処理など修正
	-> プロンテラNPCに追加クエスト「ゲオルグの呪い」を実装

・status.cのゴミ（余計なセミコロン）削除

----------------------------------------
//0427 [2007/11/24] by Rayce

・AthenaProject Rev.132を参考に、テコン蹴り準備発動時にダメージ表記がなかったのを修正（battle.c, skill.c）
	thanks to Blazeさん

・0424で巻き戻した「太陽と月と星の友」の発動確率に関する修正を再実装（battle.c, skill.c）

----------------------------------------
//0426 [2007/11/23] by Rayce

・0422の「手裏剣投げ」「苦無投げ」のコードを書き直し（battle.c）
・0423のマインドブレイカー処理が中途半端だったので修正（status.c）
・0423のMobのランダム移動の射線チェックが間違っていたので修正（mob.c）

・AthenaProject Rev.142を参考に、Mobからターゲットされている間にテレポなどで見失った時も
　ターゲットを保持し、再度視界内に入ると即時追撃してしまうのを修正（mob.c）
	thanks to Blazeさん

----------------------------------------
//0425 [2007/11/23] by Rayce

・skill_sit_count() および skill_sit_in() を最適化（skill.c）
・「太陽と月と星の奇跡」の職業判定はs_classを参照するように修正（battle.c）

・/doridoriに関する修正（clif.c, map.h）
	-> doridori_counterをsn_doridoriに改名してstate構造体内に移動
	-> tk_doridori_counter_hp, tk_doridori_counter_spをそれぞれ
	   tk_doridori_hp, tk_doridori_spに改名してstate構造体内に移動
	-> /doridoriはスーパーノービス、テコン系のみに効果が発揮されるようにチェック強化
	-> packet_db.txtの sndoridori を doridori に改名

----------------------------------------
//0424 [2007/11/23] by Rayce

・0420における「太陽と月と星の友」の修正はmergeが中途半端なので巻き戻し（battle.c）
・0420における「太陽と月と星の天使」の修正を一時的に巻き戻し（pc.c）

・0421は実装が汚いので全面巻き戻し（battle.c, map.h, pc.*, skill.c）
・0423がコンパイルできなかったのを修正（mob.c）

----------------------------------------
//0423 [2007/11/22] by Cocoa

・AthenaProject Rev.140よりmerge、thanks to Rohypnolさん
	-> マインドブレイカーによるMDEF減少効果を除算MDEF対象から減算MDEF対象に修正（status.c）

・AthenaProject Rev.142より以下の項目をmerge、thanks to Blazeさん
	-> Mobのランダム移動判定に射線チェックを追加（mob.c）

・AthenaProject Rev.151より以下の項目をmerge、thanks to ViViさん
	-> チェイスウォークを詠唱妨害可能に修正（skill_db.txt）

----------------------------------------
//0422 [2007/11/22] by Cocoa

・AthenaProject Rev.138より以下の項目をmerge、thanks to Blazeさん（battle.c, skill_cast_db.txt, skill_db.txt）
	-> 忍者スキル「手裏剣投げ」「苦無投げ」のダメージ計算を修正、必中ダメージ実装
	-> 風魔手裏剣投げを詠唱妨害されるように修正
	-> 「苦無投げ」「風魔手裏剣投げ」「空蝉」「龍炎陣」「氷柱落とし」の使用後ディレイを本家同等に修正

----------------------------------------
//0421 [2007/11/22] by Cocoa

・AthenaProject Rev.133よりmerge、thanks to Blazeさん（battle.c, map.h, pc.*, skill.c）
	-> ソウルリンカースキル「カアヒ」本実装
	-> 敵の攻撃後にディレイ発動、スキル攻撃には無反応に、エフェクト正常化
	-> 違うレベルのカアヒをかけ直した時、レベルの高低に関わらずに新しいレベルで上書きするように修正

----------------------------------------
//0420 [2007/11/22] by Cocoa

・AthenaProject Rev.131よりmerge、thanks to Blazeさん
	-> 「太陽と月と星の奇跡」「太陽と月と星の天使」は職業が拳聖のときのみ発動するように修正（battle.c, pc.c）

・AthenaProject Rev.132より以下の項目をmerge、thanks to Blazeさん
	-> 拳聖スキル「太陽と月と星の友」の発動確率を修正（battle.c）

----------------------------------------
//0419 [2007/11/20] by Cocoa

・create_arrow_db.txtをID順にソート
	thanks to ぽぽりさん

・コンセントレイションの前提スキル修正（skill_tree.txt）

----------------------------------------
//0418 [2007/11/18] by Rayce

・AthenaProject Rev.127を参考に以下を実行、thanks to Blazeさん
	-> 拳聖スキル「温もり」の攻撃間隔を秒間50HITを再現（skill.c）
	-> 温もり状態時にテレポートをすると効果を削除するように修正（pc.c）

　　※skill_unit_db.txtにおける温もりユニットのintervalを20msに変更しています。
　　　通常intervalの最小値は100msですが、温もりのみ特殊で本鯖仕様の秒間50HITを再現します。
　　　従来の仕様に戻したい場合はintervalを200msに設定し直してください。
　　　AthenaProjectのようなbattle_configでの設定はありません。

----------------------------------------
//0417 [2007/11/18] by Cocoa

・ディフェンダー解除時、SPを消費するように修正（skill.c）
・シュリンク解除時、SPを消費しないように修正（skill.c）
・AthenaProject Rev.134よりmerge、thanks to Blazeさん
	-> 25地域のモンスター配置を最新版に微修正

----------------------------------------
//0416 [2007/11/17] by Cocoa

・0407以降、ID169以降のスキルが正常に動作しなかった不具合を修正（skill.c）

----------------------------------------
//0415 [2007/11/17] by Cocoa

・矢作成のサクライ新規材料追加（create_arrow_db.txt）

・セミコロン（;）が余計に付いてたので削除（status.c）

・dbフォルダ内のファイルで改行で終了していないものを修正
　（exp_guild.txt, exp_homun.txt, item_group_db.txt,
　　job_db2.txt, refine_db.txt, random/item_rjc2006.txt）

----------------------------------------
//0414 [2007/11/17] by Rayce

・AthenaProject Rev.125よりmerge、thanks to Blazeさん
　（battle.*, clif.c, pc.c）
	-> 「太陽と月と星の天使」実装
	-> battle_confに「太陽と月と星の天使」の発動確率を設定する項目を追加

・@resethateで太陽と月と星の憎悪をリセットしてもキャラ永続変数が削除されないため、再びログイン
　すると元に戻ってしまっていた問題を修正（atcommand.c）

----------------------------------------
//0413 [2007/11/16] by Rayce

・AthenaProject Rev.119より、暫定的にLv11以上のメテオストームの効果範囲を拡大する（skill.c）
	thanks to RINさん

・AthenaProject Rev.120より以下の項目をmerge、thanks to Blazeさん
　（battle.*, skill.c, status.c）

	-> heal_counter_stopを廃止
	   Mob独自オーバースキルの発動Lvを設定する「monster_skill_over」を追加
	-> 「ファイアーボール」「サイトラッシャー」「ツーハンドクイッケン」のオーバースキル効果を実装

　　※conf/battle_auriga.conf に追加された monster_skill_over のデフォルトは11です。
　　　AthenaProjectとは違いますので注意してください。
　　　AthenaProjectのようにデフォルトを10にしてしまうと、通常効果としてのスキルLv10を使用する
　　　ことができなくなってしまうためです。
　　　そのためAthenaProject Rev.120におけるdb/mob_skill_db.txtの更新はmerge対象から外しました。

----------------------------------------
//0412 [2007/11/16] by Rayce

・AthenaProject Rev.113より、初心者修練場の追加職説明の終了処理を修正（npc_job_00novice.txt）
	thanks to Blazeさん

・AthenaProject Rev.123よりmerge、thanks to Blazeさん（skill.c, skill_cast_db.txt）
	-> NPCスキル「アイスブレス」に凍結効果を付与
	-> NPCスキル「アシッドブレス」の毒付与判定式を追加

・各種NPCファイル、およびアイテム/ペット/ホム/傭兵データベースにおいて、１行当たり読み込める
　最大文字数を1019から4095文字に拡張（homun.c, itemdb.c, merc.c, npc.c, pet.c）

----------------------------------------
//0411 [2007/11/16] by Rayce

・0397以降、PC以外がポーションピッチャーを使うとnullpoエラーが出る致命的なバグを修正（skill.c）
・0292で致命傷状態を実装した際、skill_fix_heal() の仕様が間違っていた問題を修正
　（battle.c, skill.*）
	他人にヒールをかけるとき、相手ではなく自分が致命傷のときにHP回復低下が発生したり
	など、各種ヒール計算が根本的におかしくなってました

----------------------------------------
//0410 [2007/11/16] by Rayce

・AthenaProject Rev.112およびeAthenaを参考に以下を実行、thanks to Blazeさん
　（clif.c, map.h, pc.c, skill.*, status.*, unit.c）

	-> 「穏やかな休息」「楽しい休息」の効果を「周囲にテコン系列キャラクターが座っている状態」
	   のみ発動するように修正
	-> テコン休息とギャングスターパラダイスのコードを共有するために skill_gangsterparadise() を
	   skill_sit() に変更
	-> テコン休息中のdoridori追加効果値を修正
	-> 「楽しい状態」の実装
	   確率的にSP10消費する代わりにアーススパイクスクロールの消費が無しになる
	   ただし battle_auriga.conf の item_res がnoときは意味がない
	-> 暫定で205をSI_HAPPYとして使う

----------------------------------------
//0409 [2007/11/16] by Rayce

・AthenaProject Rev.105よりmerge、thanks to Forestさん
	-> MAP名のミスにより、タナトスタワー入り口のMAPでワープポータルメモが取れて
	   しまっていた不具合修正（mapflag.txt）

・AthenaProject Rev.108およびRev.109よりmerge、thanks to allegroさん
	-> 神器クエスト内、#Brysinggamenにてgmcommandが使われていた部分をemotionに変更
	-> 神器クエスト内、書類管理人内に余分な部分が有った物を削除

・PACKETVERが10以上のとき、ギルド倉庫の装備品リスト用のバッファサイズを修正（clif.c）
・0408を少し整形（battle.c, status.c）

----------------------------------------
//0408 [2007/11/16] by Cocoa

・AthenaProject Rev.99より一部merge、thanks to Blazeさん
	-> NPCスキル「インビジブル」の効果時間がskill_cast_dbの設定に関わらず、
	   5秒になっていたのを修正（status.c）

・AthenaProject Rev.106よりmerge、thanks to Forestさん
	-> 養子状態でアルケミスト試験を受け、転職を行うと
	   通常のキャラに再設定されてしまう不具合を修正（npc_job_18alchemist.txt）

・リフレクトシールドでアシッドデモンストレーションを反射できないように修正（battle.c）

・script_ref.txtの誤字修正

----------------------------------------
//0407 [2007/11/15] by Rayce

・AthenaProject Rev.95よりmerge、thanks to Blazeさん
	-> 初心者修練場に特殊一次職の説明を追加（npc_job_00novice.txt）
・AthenaProject Rev.96よりmerge、thanks to Blazeさん
	-> リヒタルゼンNPCに追加クエスト「レッケンベルのアルバイト」を実装（npc_town_lighthalzen.txt）
・AthenaProject Rev.97より部分的にmerge、thanks to Blazeさん
	-> NPCスキル「闇属性変化」と「念属性変化」のIDが入れ替わってたのを修正（skill.*）
	-> Ep10.3〜Ep11.2までのMob使用スキルを本鯖準拠に更新

----------------------------------------
//0406 [2007/11/15] by Rayce

・AthenaProject Rev.94よりmerge、thanks to Blazeさん
	-> ID338〜354の第二期NPCスキルの宣言名、IDを本鯖と同期
	   エフェクトを正常表示するように（skill.*）
	-> ID変更に伴い、「不死属性付与」「取り巻き呼び戻し」「後退」「インビジブル」の使用Mobの
	   スキルを修正（mob_skill_db.txt）
	-> NPCスキル判断定義に第三期NPCスキルを追加（skill.c）

・0405における最大攻撃速度のデフォルト値変更がbattle.cに反映されてなかったので修正（battle.c）

----------------------------------------
//0405 [2007/11/15] by Cocoa

・AthenaProject Rev.111よりmerge、thanks to Rohypnolさん
	ソウルバーン前提スキルをスペルブレイカーからディスペルに修正(skill_tree.txt) 

・プレイヤーとモンスターの最大攻撃速度のデフォルト値を190に修正（battle_auriga.conf）

・植物栽培で生成された植物が5分で消滅するように修正（skill.c, skill_cast_db.txt）

----------------------------------------
//0404 [2007/11/15] by Rayce

・AthenaProject Rev.89を参考に、獲得経験値の上限設定の仕様を変更（battle.c, pc.c）
	thanks to Blazeさん

	conf/battle_auriga.conf の next_exp_limit の使い方を変更します。
	next_exp_limitの値が0以下の場合は本鯖仕様の制限が適用されます。
	（現Lvから次Lvへの総必要経験値分×2 - 現経験値 - 1）
	それ以外の値の場合は従来通り%表記で制限します。
	AthenaProjectとは仕様が異なるので注意してください。

・AthenaProject Rev.91を参考に、ホムにも獲得経験値の上限設定を適用するように修正（homun.c）
	thanks to Blazeさん

・スクリプトの "set BASEEXP,???;" や @コマンドの "@writevars BASEEXP ???" 等で多量の経験値を直接
　得る場合、現在Expが100%を越えてLvUpしなかったのを修正（pc.c）

----------------------------------------
//0403 [2007/11/15] by Rayce

・Webチャットのメッセージ履歴をリングバッファにし、memmoveしないように改善（clif.c）
・@mesと@meswebの効果を区別するように変更（atcommand.c, clif.*）
	@mesは全てのプレイヤーに対してメッセージを送信するだけで、Webサーバとはチャット
	しなくなります。
	@meswebが従来の@mesと同様になり、Webチャットに反映されます。
	Webチャットを使わずに全体発言だけ行いたい場合は@mesを使った方が処理が速いです。

----------------------------------------
//0402 [2007/11/14] by Rayce

・AthenaProject Rev.82よりmerge、thanks to Blazeさん
	-> ラヘル〜ベインス追加マップの水位を設定（conf/water_height.txt）
	-> ベインス追加マップのマップフラグを設定（mapflag/mapflag.txt）

・AthenaProject Rev.83よりmerge、thanks to Blazeさん
	-> ベインス追加ワープリンクの追加（タウン、ダンジョン、フィールド）

・AthenaProject Rev.84よりmerge、thanks to Blazeさん
	-> ベインスクエスト関連アイテムの特殊フラグを設定

・AthenaProject Rev.85よりmerge、thanks to Blazeさん
	-> ベインスNPC実装
	-> ベインスクエスト4種実装
	-> ベインスにジョンダ職員NPC追加
	-> ベインスに案内要員NPC追加
	-> ベインスに宿屋NPC追加

・AthenaProject Rev.86よりmerge、thanks to Blazeさん
	-> ベインスモンスター配置変更点を修正
	-> ベインスフィールド、トール火山ダンジョンのモンスターを実装

・AthenaProject Rev.87よりmerge、thanks to Blazeさん
	-> map_athena.confをベインスに対応、最新情報に更新

----------------------------------------
//0401 [2007/11/14] by Rayce

・AthenaProject Rev.69を参考に@homtalkを実装（atcommand.*）
	thanks to Quaplaさん

・AthenaProject Rev.73を参考に日本語の誤字脱字を修正（doc/item_bonus.txt）
	thanks to izayoiさん

----------------------------------------
//0400 [2007/11/14] by Rayce

・AthenaProject Rev.67よりmerge、thanks to Blazeさん
	-> 「SPEARQUICKEN」と「SPEARSQUICKEN」で名称が一致していなかったのを修正（pc.c, skill.c, status.*）
	-> 状態異常「石化進行中」の持続時間をストーンカース以外は1000msに修正（skill.c, status.c）

・ホムや傭兵にはキリエエレイソンが適用されるように0398を修正（skill.c）

----------------------------------------
//0399 [2007/11/14] by Cocoa

・AthenaProject Rev.113よりmerge、thanks to Blazeさん
	-> TheSignNPCで入力が文字列で判定が数値型になっていたのを修正（npc_quest_thesign.txt）
	-> アルベルタのTheSign関係NPCが重複していたのを削除（npc_town_alberta.txt）
	-> コモド武器商人の販売商品を正常化（npc_town_comodo.txt）

・AthenaProject Rev.104よりmerge、thanks to Forestさん
	-> 龍之城 武器商人NPCが販売している「パイク」がS4だったものをS3に修正（npc_town_louyang.txt）

----------------------------------------
//0398 [2007/11/14] by Cocoa

・一部モンスターが召還する取り巻きの数が異なっていた点を修正（db/mob_skill_db.txt）
・モンスターにはキリエエレイソンが適用されないように修正（skill.c）

----------------------------------------
//0397 [2007/11/14] by Rayce

・AthenaProject Rev.65よりmerge、thanks to Blazeさん
	-> NPCスキル「アシッドブレス」の属性を毒に、毒付与効果を追加
	   （skill_cast_db.txt, skill_db.txt, skill.c）

・AthenaProject Rev.66を参考に修正、thanks to Blazeさん
	-> ストーンスキン、アンチマジックの効果時間をスキルLvに関わらず30秒に固定（skill_cast_db.txt）
	-> 新モンスタースキルについてskill_db.txtを修正
	-> モンスターがポーションピッチャーでHP回復する場合でも致命傷による回復低下が発生
	   するように修正（skill.c）

----------------------------------------
//0396 [2007/11/14] by Rayce

・AthenaProject Rev.58を参考に、一般的な配布形式に合わせるため
　LICENCE(_JA)をCOPYING(_JA)にリネーム
	thanks to mizukiさん

・AthenaProject Rev.75を参考に、各ソースにGPLのライセンス表記を追加
	thanks to mizukiさん

----------------------------------------
//0395 [2007/11/14] by Cocoa

・db/const.txtからSC_ItemDelayを削除
・0336以降、露店からアイテムを購入出来なくなっていたバグを修正（vending.c）

----------------------------------------
//0394 [2007/11/14] by Rayce

・サーバースナップショット（version.h）
・0393で移動したランダム系アイテムをdb/フォルダから削除
