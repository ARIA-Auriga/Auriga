----------------------------------------
//0697 [2009/11/03] by Rayce

・SQLモードの場合、SEで追加された砦の情報が guild_castle テーブルに
  保存できなかった問題を修正（int_guild.c）
		reported by ponyoさん

	→ サーバ起動時の初期化時に、商業値と防衛値をデフォルトの「1」に設定する
	→ あらかじめセーブデータに砦の情報を用意する必要がなくなったので、
	   win32_start.bat および main.sql から砦情報の初期化部分を削除
	→ SQLの場合、砦情報の保存を行うときは「ON DUPLICATE KEY UPDATE」を
	   利用する（OracleのMergeクエリに相当）

・SQL: guild_castleテーブルのeconomy, defenseのデフォルト値を '1' に変更
・SQL: datetime型のフィールドのデフォルト値を '2000-01-01 00:00:00' に変更

----------------------------------------
//0696 [2009/10/27] by Rayce

・0679以降、status_calc_pc() で指定する配列のサイズが MAX_PCSKILL ではなく
  MAX_SKILL のままであったため、バッファオーバーフローが発生する致命的な問題を修正（status.c）

・性転換時の雷鳥スキルリセットにおいて、2次職/3次職のスキルがリセットされない問題を修正（char.c）

・0695の行動不能状態異常の優先順位において、SC_SLEEPは実質何もしないので
  判定処理から除外するように改善（status.c）

・GetSkillStatusChangeTable() のバッファオーバーフロー/アンダーフロー対策（skill.c）

----------------------------------------
//0695 [2009/10/22] by Cocoa

・0694の修正抜けを適用
	-> 行動不能状態異常の優先順位を実装（status.c）

----------------------------------------
//0694 [2009/10/22] by Cocoa

・item_db.txtの更新
	リリースオブウィッシュの効果実装
	大空の帽子実装
	グランペコのヘアバンド実装
	ニューカウボーイハット実装

・歴史学者(ゲオルグの呪い/建国神話)クエストの進行が止まる不具合修正（npc_town_prontera.txt）

・JobLvに関係なくアコライトに転職できた不具合を修正（npc_job_04acolyte.txt）
	JobLvなどの判定箇所未調査の為、仮修正

・プロボックのDef減少値を修正（status.c）

・アサシンテンプレより行動不能状態異常の優先順位を実装（status.c）

----------------------------------------
//0693 [2009/10/18] by Rayce

・0687以降、motd.txtを未記入にするとバッファオーバーフローが発生する致命的な問題を修正（pc.c）
	reported by magnusさん

・0691の gm_can_drop_lv の処理を最適化（clif.c, storage.c）

----------------------------------------
//0692 [2009/10/18] by Rayce

・0689の修正
	→ Mob専用スキルを不発にしない判定をskill.cにハードコーディングするのではなく
	   db/skill_db2.txt のmisfireの設定値でのみ判定するように変更（skill_db2.txt, skill.c）

	→ 右手のOTダメージが左手のダメージに加算されている間違いを修正（battle.c）

	→ アクティブタイマーの永続問題の修正を巻き戻し（pc.c）
	   変数 current_equip_name_id を参照しても良いのはitembonus内で呼び出される場合のみです！
	   pc_unequipitem() は他の場所からも呼び出されるものなので、current_equip_name_id に
	   格納されている変数の一貫性は保証できません。

・skill_upperskill(), skill_mobskill() をstaticに変更（skill.*）
・使われていない関数 skill_abraskill(), skill_cloneable() を削除（skill.*）

----------------------------------------
//0691 [2009/10/17] by popori

・0689のgm_can_drop_lvの修正を再度修正 (clif.c storage.c)
　ponyoさんに感謝

----------------------------------------
//0690 [2009/10/16] by popori

・0689のイグニッションブレイクの修正が抜けていたので追加 (skill.c)

----------------------------------------
//0689 [2009/10/16] by popori

・アクティブタイマーが永続してしまうバグを修正 (pc.c)
　うに〜くさんに感謝

・ヒールのディレイが消えているのを修正 (skill_cast_db.txt)
　Cocoaさんに感謝

・オーバートラストの攻撃力増加を使用者25%、パーティーメンバーを5%に修正 (battle.c status.c)
　dragontail789さんに感謝

・gm_can_drop_lvの取引禁止、倉庫出し入れが制限出来ていなかったので追加 (clif.c storage.c)
　ponyoさん、cornusさんに感謝

・バーサーク中、月光剣等でSP回復するよう修正 (pc.c)
　hancho3さん、dreamさんに感謝

・0686のdbを修正 (skill_cast_db.txt)
　LunarPhantomさんに感謝

・AthenaProject Rev.435をマージ (skill_db.txt skill_db2.txt skill_cast_db.txt abra_db.txt battle.c skill.c status.c)
 ->NPCスキル「ガイデッドアタック」を本鯖仕様に修正(参考：アサテンプレ)
 ->→一定時間DEX150%(効果時間が不明なので1Lvにつき5秒としました)
 ->同時にソース内名称も「ガイデッドアタック」で統一
　nanashiさんに感謝

・AthenaProject Rev.432をマージ (skill_cast_db.txt skill_tree.txt battle.c skill.c)
 ->スキル「ウォールオブフォグ」を本鯖仕様に修正(参考：sage wiki)
 ->同時に、ソース内名称を「ウォールオブフォグ」に統一
　nanashiさんに感謝

・サクラメントのキャスティング減少率を修正 (skill.c)
　dragontail789さんに感謝

・イグニッションブレイクの条件式がおかしかったので警告が出ていたのを修正 (skill.c)

----------------------------------------
//0688 [2009/10/15] by Rayce

・x64のWindows環境下において、コンパイル時に「'SOCKET' から 'int' への変換です」の
  警告が発生するのを修正（socket.c）
	reported by Toshiさん

・0687以降、x64でコンパイル時に「'size_t' から 'int' に変換しました。」の
  警告が発生するのを修正（script.c）
	reported by Toshiさん

----------------------------------------
//0687 [2009/10/15] by Rayce

・conf/motd.conf が32行までしか読み込めなかった制限を撤廃（pc.c）
		reported by dragontail789さん
	→ MOTD_LINE_SIZE を使用せず、記述された全ての内容を保存するようにメモリアロケートする
	→ MOTDの送信処理を pc_send_motd() として分離

・add_str() における変数について、x64を意識してsize_t型に変更（script.c）

----------------------------------------
//0686 [2009/10/13] by popori

・マーダラーボーナスに取得経験値2倍が無かったので追加 (pc.c)

・サンクチュアリは盗作不可に変更 (skill_db2.txt)

・エンチャントデッドリーポイズンの効果をリログで切れるように修正 (scdata_db.txt)

・ストームガストが1HITしかしなくなっていたのを修正 (skill_cast_db.txt)
　LunarPhantomさん、dragontail789さんに感謝

・フロストノヴァも同時に修正 (skill_cast_db.txt)
　LunarPhantomさんに感謝

・マジスレテンプレより、スタン中は凍結しないように修正 (status.c)

・キルハイルクエストが止まるのを修正 (npc_quest_kiel.txt)
　Cocoaさんに感謝

----------------------------------------
//0685 [2009/10/12] by Rayce

・foreach系の関数は、実行したサブルーチンの戻り値を加算してint型として返すように拡張
  （db.*, clif.*, map.*, party.*）
	based on eA, thanks a lot!!

・foreach系の関数で数をカウントする部分については、戻り値だけで取得するように改善

----------------------------------------
//0684 [2009/10/09] by Rayce

・skill_castend_id() および skill_castend_pos() において、PACKETVERが15以下の場合でも
  clif_skill_cooldown() を呼び出すように簡略化（skill.c）

・3次職スキルのクールタイム判定箇所をstatic timerの部分に移動（clif.c）
・status_change_start() で、常に icon_tick を初期化するように簡素化（status.c）
・status_get_max_sp() のデフォルト値を 1 → 0 に変更（status.c）

・全体的な細かい整形（battle.c, clif.c, pc.c, skill.c, status.c）

----------------------------------------
//0683 [2009/10/09] by Rayce

・0677のグランドクロスおよびグランドダークネスのDEF無視強制解除処理タイミングを変更（battle.c）
・0677のニューマ貫通処理のリファクタリング（battle.c）

・WL_EARTHSTRAIN の発動率計算式を、漸化式から一般式に改善（skill.c）
・WL_EARTHSTRAIN の初期位置指定は dirx[], diry[] を利用して簡素化（skill.c）
・RK_IGNITIONBREAK および WL_COMET において、unit_distance() が複数回呼ばれる無駄を改善（skill.c）

・配列のサイズが中途半端になるので、MOB_ID_MAX を 2500 → 2501 に変更（mob.h）

----------------------------------------
//0682 [2009/10/09] by Rayce

・MOBが影跳びを使用するとき、サーバクラッシュする可能性を修正（skill.c）
・GC_PHANTOMMENACE の範囲攻撃処理で、状態異常情報がNULLの場合にサーバクラッシュする可能性を修正（skill.c）

・WL_EARTHSTRAIN において、PCのインベントリの検索処理でバッファオーバーフローが
  発生していた問題を修正（skill.c）

・clif_mshield() で確保するバッファサイズが小さいため、バッファオーバーフローが
  発生していた問題を修正（clif.c）

・AB_CLEMENTIA, AB_CANTO, AB_CHEAL のcase文の誤りを修正（skill.c）
・pc_readdb() において、MAX_PCSKILL の不等号が間違っているので修正（pc.c）

・RK_DRAGONBREATH の計算式を暫定変更（battle.c）
	現行の計算式では、HPとSPが攻撃ダメージに及ぼす値が常に0であるため
	また、最大SPが0のとき（スキル使用者がMOBの場合等）に0除算のエラーが発生するため

----------------------------------------
//0681 [2009/10/08] by popori

・テコンランカーボーナスにテコン全スキルLvMAXで使用可能が抜けていたので追加 (pc.c)
　dragontail789さんに感謝

・ディバインプロテクションの計算式を修正 (battke.c)
　dragontail789さんに感謝

・カイゼルで復活した時にオシリスカードの効果が発動するよう修正 (pc.c)

----------------------------------------
//0680 [2009/10/07] by popori

・db系統の更新が全て巻き戻っているので、再度変更
(skill_db.txt skill_db2.txt skill_unit_db.txt skill_cast_db.txt )
　dragontail789さん、cornusさんに感謝

・ヘルジャッジメントの範囲をLv10の時のみ27×27にする (skill_unit_db.txt)
　Blazeさんに感謝

・ドキュメントの追記 (client_packet.txt)

・0679のコンパイル警告を修正 (skill.c)

・0679以降@allskill、/allskillが正常に動作しなくなっていたのを修正 (pc.c)
　NP3228さん、dragontail789さんに感謝

・影斬りの移動効果をGvGMAPでは発動しないよう修正 (skill.c)

----------------------------------------
//0679 [2009/10/06] by Blaze

・3-1次職スキル暫定実装（一部未実装）
	 (skill.*, battle.c, status.*, unit.c, pc.*, db/produce_db.txt,
	  db/skill_db.txt, db/skill_db2.txt, db/skill_cast_db.txt,
	  db/skill_require_db.txt, db/skill_unit_db.txt, db/scdata_db.txt）

・3次職関連アイテムを一部実装
	（db/item_db.txt, db/const.txt）

・スキルIDが肥大化してきたため、ID区分を3つに分割
	（mmo.h, char.c, char-converter.c, skill.*, pc.*）

・SkillStatusChangeTableを参照するとき、GetSkillStatusChangeTable()で参照させるように統一
	-> SkillStatusChangeTableのextern宣言を撤廃
	-> skill.c外部からステータス異常を参照するとき、Tableを使用しないように修正
	（skill.*, pc.c, battle.c, status.c）

・clif_status_change()を拡張
	-> 拡張定義のvalを指定できるように
	-> デバッグコマンド「@icon」に第4パラメータを指定できるように
	（clif.*, atcommand.c, conf/help.txt）

・status_change_start()からアイコン表示時、一部状態異常で
　tickが書き換えられてタイマーが表示されてしまうのを修正
	（status.c）

・スキルの固有ディレイ（クールタイム）を暫定実装（3次職スキルのみ対応）
	-> skill_cast_db.txtにクールタイムの設定項目を追加
	（skill.c, clif.c, db/skill_cast_db.txt, db/db_ref.txt）

・スクリプトにsetdragon命令とcheckdragon()を追加
	（script.c, db/script_ref.txt）

----------------------------------------
//0678 [2009/10/05] by popori

・0677のソウルチェンジの判定文がおかしかったのを修正 (skill.c)

----------------------------------------
//0677 [2009/10/05] by popori

・スパイラルピアースを強制遠距離に (skill_db2.txt)
　Y.Minadukiさんに感謝

・イービルランドの範囲を固定で11×11に変更 (skill_unit_db.txt)
　Toshiさんに感謝

・ベノムスプラッシャーの爆発までのインターバルを変更 (skill_cast_db.txt)
　Toshiさんに感謝

・バーサーク中の相手にソウルチェンジ出来ないように修正 (skill.c)

・スパイダーウェブに関する修正 (skill_db.txt skill_unit_db.txt skill_cast_db.txt)
 ->効果時間変更
 ->範囲を1×1に変更
 ->対象指定に変更

・AthenaProject Rev.350をマージ (battle.c)
 ->MOBの「アローシャワー」「シャープシューティング」はニューマを貫通するように修正
 ->また、遠距離攻撃耐性のアイテム効果を無視するように修正
　nanashiさんに感謝

・倉庫の最大預かり数をデフォルトで600に変更 (mmo.h)

・グランドクロス、グランドダークネスの攻撃力修正、DEF無視を強制解除するよう修正 (battle.c)
　shobonさんに感謝

・魔王モロクがタイムアウトでKillされないのを修正 (npc_town_morocc.txt)
　Toshiさん、Cocoaさんに感謝

・MOB_ID_MAXを2500に拡張しておく (mob.h)

・ヘルジャッジメントの効果がアイスウォールに及ばないよう修正 (skill.c)

・ヴァンパイアリタッチはBL_CHARを用いるように修正 (skill.c)

・アンクルで拘束中のMOBはテレポート出来ないように修正 (skill.c)

----------------------------------------
//0676 [2009/09/28] by popori

・一部のクライアントがサポート出来ていなかったのでPACKETVERを分ける (clif.* skill.c Makefile bcc32_make.bat vc_make.bat *.dsp)
 ->新スキルウインドウ対応をPACKETVER15に
 ->skillstatictimerのディレイ表示サポートをPACKETVER16に
　 ※ただし今のところこのパケットを使用するのは3次スキルのみ？らしいので、パケットの実装のみ。
 ->0x1a2の拡張をPACKETVER17に
 ->バフ時間表示、ディレイタイム表示をPACKETVER18に

・packet_db.txtの追記、修正 (packet_db.txt)

・ドキュメントの追記 (client_packet.txt)

・一部のbattle_auriga.confの初期値を本鯖仕様に変更 (battle_auriga.conf battle.c)

・Cocoaさんのランドマインの待機時間の修正を再度取り込み (skill_cast_db.txt)
　Cocoaさんに感謝

・影跳びはGvG中使用不可、失敗してもSPを消費するよう修正 (skill.c)

----------------------------------------
//0675 [2009/09/24] by Rayce

・即時発動スキル（skill_db.txtのinfが4）については、対象を自分自身に強制するように修正（clif.c）
	reported by Lyeseさん

	-> 即時発動スキルを他者に使用できてしまう問題が解決されます
	-> 阿修羅とティオアプチャギは状況に応じてinfが「即時発動」から「敵」に変更される場合があるため
	   別途判定を設けてます

・anti hackerコードの追加
	merged from eA, thanks a lot!!

	-> ホムや傭兵が居ない状態でもホムスキルや傭兵スキルを使えてしまうのを防ぐ
	-> ID指定スキルは、infが0（パッシブスキル）と2（地面スキル）の場合は使用できないようにする
	-> 地面指定スキルは、infが2（地面スキル）以外の場合は使用できないようにする

----------------------------------------
//0674 [2009/09/23] by Rayce

・gcc4でコンパイル時の警告を修正
	-> dereferencing type-punned pointer will break strict-aliasing rules（socket.c, httpd.c）
	-> implicit declaration of function（login.c）

・UNIX/Linuxにおいて、gccのバージョン表記が英語以外の場合を考慮して
  バージョン番号を検出する部分を修正（Makefile）

----------------------------------------
//0673 [2009/09/23] by Rayce

・キャスティングペナルティ「casting_penalty_type」を有効化している場合、ログイン時に装備が
  外れてしまう問題を修正（pc.c）
	reported by dragontail789さん

・上記のようにunit_dataの初期化が行われていないと様々な問題を引き起こす可能性があるため
  unit_dataset() の呼び出し優先度を上げるように修正（homun.c, merc.c, mob.c, pet.c）

・battle_auriga.conf の「hide_GM_session」の説明を修正（conf/battle_auriga.conf）
	reported by ponyoさん

・script_ref.txt のgetareadropitem関数の説明が間違っていたのを修正（doc/script_ref.txt）
	reported by crisp.さん

----------------------------------------
//0672 [2009/09/23] by Rayce

・msg_auriga.conf のimportが作動しなかった問題を修正（atcommand.c）
	reported by dragontail789さん、thanks to Blazeさん

・@giveitemコマンドで、「%sを%d個貰いました。」のメッセージはコマンド使用者ではなく
  アイテムを配布されたユーザに表示されるように修正（atcommand.c）
	thanks to dragontail789さん

・atcommand_auriga.conf のsynonymコマンドにGMレベルを個別設定できるように拡張（atcommand.c）

	例）reloaditemdb: 99
	    ri1= reloaditemdb
	    ri2= reloaditemdb: 50

	@reloaditemdb のGMレベルは99に設定される
	@ri1 は従来通りのsynonym書式なので、@reloaditemdb のGMレベルを引き継いで99に設定される
	@ri2 は個別設定書式なので、GMレベルは50に設定される（@reloaditemdb は99のまま）

----------------------------------------
//0671 [2009/09/23] by Rayce

・全体的な細かい整形（battle.c, merc.c, mob.c, pc.c, skill.c, status.*）

----------------------------------------
//0670 [2009/09/23] by Rayce

・0634以降、スキル使用失敗時に失敗メッセージが表示されなくなったスキルを修正（skill.c）
	-> フロストダイバー
	-> パンボイス
	-> 魅惑のウィンク

・0634以降、クラッカーの使用失敗時にnullpoエラーが発生するのを修正（skill.c）

・攻撃時の距離判定処理を最適化（battle.c）
  calc_flag の dist メンバは不要になったので削除
・battle_skill_attack() における追加効果判定文を最適化（battle.c）

----------------------------------------
//0669 [2009/09/23] by Rayce

・bDefRatioATK系とbIgnoreDefの戦闘ダメージ計算方法を最適化（battle.c）
	-> bIgnoreDef系の判定をstep15からstep14に移動して先に計算する
	-> bIgnoreDef系のrateが100ならbIgnoreDef系が無いものとみなし、bDefRatioATK系の計算を行う

----------------------------------------
//0668 [2009/09/23] by Rayce

・status_get_max_hp() MOBのギルド情報取得において、 guild_mapname2gc() の代わりに
  guild_mapid2gc() を使うように最適化（status.c）
・歩行停止処理 unit_stop_walking() を整理（unit.c）
・凍結の滑りに関する処理から SC_BLADESTOP の判定を分離する（mob.c）

・hex_dump() で、半角スペース（0x20）は「.」に置換せずに表示するように修正（utils.c）

----------------------------------------
//0667 [2009/09/23] by Rayce

・フリップザコインのコインタイマーに関する修正（pc.c, unit.c）
	-> ログイン時、コインタイマーが初期化されてなかったのを修正
	-> ログアウト時、コインタイマーが削除されてなかったのを修正

・ログイン時、AutoActiveタイマーを初期化するように修正（pc.c）
・bAutoActiveItem系において、効果時間が32768msまでしか指定できないので、
  activeitem構造体の tick メンバをshort型からint型に変更（map.h, pc.*）

----------------------------------------
//0666 [2009/09/23] by Rayce

・pc_activeitem() の引数の flag をunsigned long型に変更（pc.h）
・活性化発動タイミングを補正するため、pc_activeitem_start() の引数に tick を追加（battle.c, pc.*）
・map_session_data構造体の activeitem_timertick メンバは不要なので撤去（map.h, pc.c, script.c）

・アクティブアイテム関連処理のリファクタリング（pc.c, script.c）

----------------------------------------
//0665 [2009/09/23] by Rayce

・スキルディレイに関する処理は全て skill_delayfix() に集約する（battle.c, skill.*, unit.c）
	-> 引数を変更し、スキルIDとスキルLvのみを渡す
	-> unit.cでの個別処理をしないようにする

・スキルディレイがamotionより小さい場合、amotionを最低値として保証する（skill.c）
	merged from eA, thanks a lot!!

----------------------------------------
//0664 [2009/09/23] by Rayce

・武器研究の命中率計算が桁落ちしていた問題を修正（battle.c）
・武器研究の命中率計算のタイミングをstep3からstep2に移動（battle.c）

・ゴスペルの敵に対する呪い/暗黒/毒効果において、確率計算にはスキルユニットではなく
  ユニット所有者のベースレベルを渡すように修正（skill.c）

・skill_castend_pos() における SI_ACTIONDELAY の発生タイミングを
  skill_castend_pos2() の呼び出し前に移動（skill.c）

----------------------------------------
//0663 [2009/09/23] by Rayce

・0630以降、ジークフリードの装備耐性の効果が無かったのを修正（status.c）
・あまり意味がないので、battle_auriga.conf の「scdef_no_difflevel」は撤廃（battle.*, status.c）
・月の安楽状態に関する判定が間違っているような気がするので修正（status.c）

----------------------------------------
//0662 [2009/09/23] by Rayce

・スキル個別の仕様切り替え機能は蛇足なので、battle_auriga.conf の「whistle_perfect_flee」は撤廃
  口笛は完全回避上昇効果が無い仕様で固定化
  （battle.*, skill.c, status.c）

・PC以外の場合においても口笛に完全回避上昇を乗せないように修正する（status.c）
・SC_WHISTLE_ 状態における回避上昇計算が SC_WHISTLE を元に行われていた問題を修正（status.c）

----------------------------------------
//0661 [2009/09/23] by Rayce

・clif_status_change() を整理（clif.c）
・@icon に第3引数を追加（atcommand.c）
	アイコンのディレイ時間を指定、省略時は0と同じ

・conf/help.txt更新
・doc/client_packet.txt更新

----------------------------------------
//0660 [2009/09/23] by Rayce

・0645以降、トルリョチャギの吹き飛ばし効果がMOBが使用したときのみしか発動しないのを修正（skill.c）

・阿修羅覇王拳をShiftクリックで発動したとき、SPを0にする処理は battle_skill_attack() 内
  ではなく、呼び出し元の skill_castend_damage_id() で行う（battle.c, skill.c）

・ブランディッシュスピアをShiftクリックで発動したときのエフェクト発生処理方法を最適化（skill.c）

----------------------------------------
//0659 [2009/09/23] by Rayce

・ストームガストの3HIT目で弾かない処理をリファクタリング（battle.c）

・スキル個別の仕様切り替え機能は蛇足なので、battle_auriga.conf の「sg_type」は撤廃（battle.*, skill.c）
  11x11のユニットを1個生成するのではなく、3x3のユニットを81個生成する仕様に固定する

・ストームガストのスキルユニットのrangeを1に合わせる（db/skill_unit_db.txt）

----------------------------------------
//0658 [2009/09/23] by Rayce

・アースクェイクの計算式を一般式に変更（battle.c）
・アースクェイクに関する条件判定順序を入れ替え（battle.c）

・アースクェイクにおけるPCとMOBの判定処理を最適化（skill.c）
  以下の2つの関数は不要なので削除
	-> skill_area_sub_count_mob()
	-> skill_area_sub_count_pc()

・0655において、pkmap_noteleportの記述を除去抜けがあり
  コンパイルできなかった問題を修正（skill.c）

----------------------------------------
//0657 [2009/09/23] by Rayce

・pointshopは <point> に負数を指定しても値の補正をしないように0623以前の仕様に戻す（npc.c）
・pointshopは価格設定の「:」を省略できないように強化（npc.c）
・ショップのアイテムIDと価格の書式が間違っている場合、エラーを出力するように強化（npc.c）

----------------------------------------
//0656 [2009/09/23] by Rayce

・MAX_MOBSKILLは 64 だと大きすぎるので 48 に引き下げ（map.h）
・MOBが待機時のスキル使用を失敗したとき、return で終了せずに歩行処理を続行する（mob.c）
・unit_data構造体に追加された idlecount メンバをmob_data構造体に変更（map.h, mob.c）

----------------------------------------
//0655 [2009/09/23] by Rayce

・battle_auriga.conf の「pkmap_noteleport」を撤廃
  代わりに map_auriga.conf の「map_pk_noteleport」で全てのPKマップに対して
  一括でMAPフラグ noteleport を設定するようにする（battle.*, map.c）

・battle_auriga.conf の初期値を変更（battle.c）
	monster_skill_over = 10
	NULL = 0

----------------------------------------
//0654 [2009/09/23] by Rayce

・出来る限り BL_CHAR マクロを利用するように置き換え（battle.c, mob.c, skill.c）
・battle_calc_damage() におけるGvG補正処理を最適化（battle.c）
・演算子の優先順序が間違っている可能性があるので修正（npc.c）

----------------------------------------
//0653 [2009/09/22] by Rayce

・GvGで城主が交代したとき、ワープ中でブロックリストから外れたPCが砦外に退去できない
  問題に関する対処（battle.*, script.c）
	based on eA, thanks a lot!!

	-> buildin_maprespawnguildid() を書き換え
	   PC用の検索ルーチン buildin_maprespawnguildid_sub_pc() と、
	   MOB用の検索ルーチン buildin_maprespawnguildid_sub_mob() の2つに分離
	-> battle_auriga.conf に「maprespawnguildid_all_players」を追加
	   デフォルトは本鯖と同じ「no」
	   「yes」にするとワープ中のPCも砦外に退去させる

----------------------------------------
//0652 [2009/09/22] by Rayce

・battle_auriga.conf の「pvp_send_guild_xy」の判定は、clif_guild_xy() 内ではなく
  呼び出し元の guild_send_xy_timer_sub() で行うように変更（clif.c, guild.c）

・guild_castlealldataload() のリファクタリング（guild.c）

----------------------------------------
//0651 [2009/09/22] by Rayce

・砦で MobId: 1285〜1288 のモンスターを呼び出すと、常にギルド所属扱いになるのを撤廃（mob.c）

・NPCスクリプトの getguardianinfo 関数で、indexに1〜8以外を指定すると
  バッファオーバーフロー/アンダーフローが発生するのを修正（script.c）

----------------------------------------
//0650 [2009/09/22] by Rayce

・各砦に設定可能なガーディアンの数は、MAX_GUILDGUARDIAN ではなく直接「8」で指定する
  （mmo.h, mob.c, script.c）

	※セーブデータはガーディアンの数を「8」であることを前提として処理を行っているため、
	  MAX_GUILDGUARDIAN を「8」以外の任意の数に変更してしまうとサーバクラッシュする。
	  可変に設定できないことを明示するために、配列の数を「8」で固定化する。

・砦情報を高速に取得するために guild_mapid2gc() を追加（mmo.h, guild.*）

	※guild_mapname2gc() はMAP名を文字列比較で検索するため低速です。
	  そのため、MAP番号を用いて高速に検索を行える guild_mapid2gc() を追加しました。
	  ただし、同一MAPサーバであることが確定している場合のみ使用可能です。
	  他のMAPサーバが管理しているMAPについては検索できないので注意してください。

・NPCスクリプトの callguardian 命令で、複数体のガーディアンを呼び出すと
  最後の1体しか砦所属にならない問題を修正（script.c）
・guild_mapname2gc の引数をconstにする（guild.*）

----------------------------------------
//0649 [2009/09/22] by Rayce

・sc_startおよびsc_starte命令において、完全耐性の場合でも状態異常に掛かる問題をを修正（script.c）
・getscrate命令は status_change_rate() の結果をそのまま返すように修正（script.c）
  引数の <percentage> と戻り値を百分率から万分率に変更

・doc/script_ref.txtを修正

----------------------------------------
//0648 [2009/09/22] by Rayce

・カプラのカートサービスにおいて、職業コードが数値指定に巻き戻っていたので修正
  （script/npc/misc/npc_misc_kafra.txt）

・細かい整形（db/packet_db.txt, db/scdata_db.txt）

----------------------------------------
//0647 [2009/09/22] by Rayce

・サーバースナップショット（version.h）
